<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banking Risk Management Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: #f8f9fb;
            color: #1e293b;
        }

        /* Layout */
        .app-container {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: white;
            border-right: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            transition: width 0.3s ease;
        }

        .sidebar.collapsed {
            width: 70px;
        }

        .sidebar-header {
            padding: 24px 20px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 18px;
        }

        .logo-text {
            font-size: 18px;
            font-weight: 600;
            color: #1e40af;
        }

        .sidebar.collapsed .logo-text {
            display: none;
        }

        .nav-menu {
            flex: 1;
            padding: 20px 0;
        }

        .nav-item {
            padding: 12px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #64748b;
            transition: all 0.2s;
            font-size: 14px;
            font-weight: 500;
        }

        .nav-item:hover {
            background: #f1f5f9;
            color: #1e40af;
        }

        .nav-item.active {
            background: #eff6ff;
            color: #1e40af;
            border-right: 3px solid #3b82f6;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .sidebar.collapsed .nav-text {
            display: none;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Top Bar */
        .top-bar {
            background: white;
            border-bottom: 1px solid #e2e8f0;
            padding: 16px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 24px;
        }

        .search-bar {
            flex: 1;
            max-width: 500px;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 10px 16px 10px 40px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            outline: none;
            transition: border 0.2s;
        }

        .search-bar input:focus {
            border-color: #3b82f6;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
        }

        .top-bar-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .notification-btn, .profile-btn {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.2s;
            position: relative;
        }

        .notification-btn {
            background: #f1f5f9;
            color: #64748b;
        }

        .notification-btn:hover {
            background: #e2e8f0;
        }

        .notification-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
            border: 2px solid white;
        }

        .profile-btn {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            font-weight: 600;
            font-size: 14px;
        }

        /* Content Area */
        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 32px;
        }

        /* Page Header */
        .page-header {
            margin-bottom: 32px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: #0f172a;
            margin-bottom: 8px;
        }

        .page-subtitle {
            font-size: 14px;
            color: #64748b;
        }

        /* KPI Cards */
        .kpi-grid {
            display: flex;
            gap: 20px;
            margin-bottom: 32px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .kpi-grid::-webkit-scrollbar {
            height: 6px;
        }

        .kpi-grid::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 3px;
        }

        .kpi-grid::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }

        .kpi-grid::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        .kpi-card {
            background: white;
            padding: 24px;
            border-radius: 16px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-width: 200px;
            width: 200px;
            height: 200px;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #1e40af 0%, #3b82f6 100%);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
        }

        .kpi-card:hover::before {
            transform: scaleX(1);
        }

        .kpi-card:hover {
            box-shadow: 0 12px 28px rgba(59, 130, 246, 0.2);
            transform: translateY(-6px);
            border-color: #3b82f6;
        }

        .kpi-card:active {
            transform: translateY(-4px) scale(0.98);
        }

        .kpi-header {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .kpi-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
            transition: transform 0.3s ease;
        }

        .kpi-card:hover .kpi-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .kpi-label {
            font-size: 12px;
            color: #64748b;
            font-weight: 600;
            line-height: 1.3;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .kpi-value {
            font-size: 32px;
            font-weight: 800;
            color: #0f172a;
            line-height: 1;
            margin: 8px 0;
        }

        .kpi-trend {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 6px;
            width: fit-content;
        }

        .trend-up {
            color: #059669;
            background: #d1fae5;
        }

        .trend-down {
            color: #dc2626;
            background: #fee2e2;
        }

        .kpi-subtitle {
            font-size: 11px;
            color: #94a3b8;
            margin-top: 4px;
            font-weight: 500;
        }

        @media (max-width: 1200px) {
            .kpi-card {
                min-width: 180px;
                width: 180px;
                height: 180px;
            }
        }

        @media (max-width: 768px) {
            .kpi-card {
                min-width: 160px;
                width: 160px;
                height: 160px;
            }
            .kpi-value {
                font-size: 28px;
            }
        }

        /* Modal Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Form Inputs */
        .form-input {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
            outline: none;
            transition: all 0.2s;
            background: white;
        }

        .form-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-input::placeholder {
            color: #94a3b8;
        }

        /* Chart Cards */
        .chart-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        @media (max-width: 1024px) {
            .chart-grid {
                grid-template-columns: 1fr;
            }
        }

        .chart-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
            color: #0f172a;
        }

        .chart-subtitle {
            font-size: 13px;
            color: #64748b;
            margin-top: 4px;
        }

        /* Tables */
        .table-card {
            background: white;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            overflow: hidden;
        }

        .table-header {
            padding: 20px 24px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-size: 16px;
            font-weight: 600;
            color: #0f172a;
        }

        .table-actions {
            display: flex;
            gap: 12px;
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: #f8f9fb;
        }

        th {
            text-align: left;
            padding: 12px 24px;
            font-size: 13px;
            font-weight: 600;
            color: #475569;
            border-bottom: 1px solid #e2e8f0;
        }

        td {
            padding: 16px 24px;
            font-size: 14px;
            color: #1e293b;
            border-bottom: 1px solid #f1f5f9;
        }

        tr:hover {
            background: #f8f9fb;
        }

        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-low {
            background: #d1fae5;
            color: #065f46;
        }

        .badge-medium {
            background: #fed7aa;
            color: #92400e;
        }

        .badge-high {
            background: #fecaca;
            color: #991b1b;
        }

        .badge-critical {
            background: #fca5a5;
            color: #7f1d1d;
        }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .btn-secondary {
            background: white;
            color: #1e40af;
            border: 1px solid #e2e8f0;
        }

        .btn-secondary:hover {
            background: #f8f9fb;
        }

        /* Risk Score Gauge */
        .risk-gauge-container {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .risk-gauge {
            position: relative;
            width: 200px;
            height: 200px;
        }

        .gauge-score {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .gauge-value {
            font-size: 48px;
            font-weight: 700;
            color: #0f172a;
        }

        .gauge-label {
            font-size: 14px;
            color: #64748b;
            margin-top: 4px;
        }

        /* Timeline */
        .timeline {
            padding: 24px;
        }

        .timeline-item {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            position: relative;
        }

        .timeline-item:not(:last-child)::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 32px;
            bottom: -24px;
            width: 2px;
            background: #e2e8f0;
        }

        .timeline-dot {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            z-index: 1;
        }

        .timeline-content {
            flex: 1;
            padding-top: 4px;
        }

        .timeline-title {
            font-size: 14px;
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 4px;
        }

        .timeline-desc {
            font-size: 13px;
            color: #64748b;
        }

        .timeline-date {
            font-size: 12px;
            color: #94a3b8;
            margin-top: 4px;
        }

        /* Action Panel */
        .action-panel {
            background: white;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            padding: 24px;
        }

        .action-item {
            padding: 16px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .action-item:hover {
            border-color: #3b82f6;
            background: #f8f9fb;
        }

        .action-title {
            font-size: 14px;
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 8px;
        }

        .action-meta {
            display: flex;
            gap: 16px;
            font-size: 12px;
            color: #64748b;
        }

        /* Filter Panel */
        .filter-panel {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            margin-bottom: 24px;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .filter-group label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: #475569;
            margin-bottom: 8px;
        }

        .filter-group select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            outline: none;
            cursor: pointer;
        }

        /* Metric Cards for Model Monitoring */
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .metric-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 16px;
        }

        .metric-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .metric-value-large {
            font-size: 36px;
            font-weight: 700;
            color: #0f172a;
            margin-bottom: 4px;
        }

        .metric-label {
            font-size: 13px;
            color: #64748b;
        }

        /* Loading States */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .skeleton {
            background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%);
            background-size: 200% 100%;
            animation: pulse 1.5s ease-in-out infinite;
            border-radius: 4px;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                width: 70px;
            }
            .sidebar .logo-text,
            .sidebar .nav-text {
                display: none;
            }
            .chart-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .content-area {
                padding: 20px;
            }
            .kpi-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Page visibility */
        .page {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">BR</div>
                <div class="logo-text">BankRisk Pro</div>
            </div>
            <div class="nav-menu">
                <div class="nav-item active" data-page="dashboard" onclick="showPage('dashboard')">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    <span class="nav-text">Dashboard Overview</span>
                </div>
                <div class="nav-item" data-page="portfolio" onclick="showPage('portfolio')">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    <span class="nav-text">Portfolio Risk</span>
                </div>
                <div class="nav-item" data-page="operations" onclick="showPage('operations')">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                    </svg>
                    <span class="nav-text">User Operation Tracker</span>
                </div>
                <div class="nav-item" data-page="customer" onclick="showPage('customer')">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 21h7a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v11m0 5l4.879-4.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242z"></path>
                    </svg>
                    <span class="nav-text">Customer Profile Lookup</span>
                </div>
                <div class="nav-item" data-page="model" onclick="showPage('model')">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                    </svg>
                    <span class="nav-text">Model Monitoring</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="search-bar">
                    <svg class="search-icon" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <input type="text" placeholder="Search customers, loans, reports...">
                </div>
                <div class="top-bar-actions">
                    <div class="notification-btn">
                        <div class="notification-badge"></div>
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                        </svg>
                    </div>
                    <div class="profile-btn">AS</div>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- PAGE 1: EXECUTIVE DASHBOARD -->
                <div id="page-dashboard" class="page active">
                    <div class="page-header">
                        <h1 class="page-title">Executive Dashboard</h1>
                        <p class="page-subtitle">Real-time portfolio risk overview and key performance indicators</p>
                    </div>

                    <!-- Alert Notifications -->
                    <div style="margin-bottom: 32px;">
                        <!-- Critical Alerts -->
                        <div style="background: #fef2f2; border-left: 4px solid #ef4444; padding: 18px 24px; border-radius: 8px; margin-bottom: 14px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); cursor: pointer;" onclick="showAlertDetails('critical')">
                            <div style="display: flex; align-items: start; gap: 14px;">
                                <div style="background: #ef4444; width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                    <svg width="20" height="20" fill="white" viewBox="0 0 16 16">
                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                        <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                                    </svg>
                                </div>
                                <div style="flex: 1;">
                                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 6px;">
                                        <div>
                                            <div style="font-size: 15px; font-weight: 600; color: #991b1b; margin-bottom: 3px;">23 accounts flagged for immediate review</div>
                                            <div style="font-size: 13px; color: #7f1d1d; line-height: 1.5;">Risk scores increased significantly overnight - portfolio exposure ₹8.2M</div>
                                        </div>
                                        <div style="background: #ef4444; color: white; padding: 3px 10px; border-radius: 4px; font-size: 11px; font-weight: 600; white-space: nowrap;">URGENT</div>
                                    </div>
                                    <div style="font-size: 12px; color: #991b1b; margin-top: 6px;">
                                        Needs attention • Last updated 2 hours ago
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Warning Alert -->
                        <div style="background: #fffbeb; border-left: 4px solid #f59e0b; padding: 18px 24px; border-radius: 8px; margin-bottom: 14px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); cursor: pointer;" onclick="showAlertDetails('warning')">
                            <div style="display: flex; align-items: start; gap: 14px;">
                                <div style="background: #f59e0b; width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                    <svg width="20" height="20" fill="white" viewBox="0 0 16 16">
                                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                                    </svg>
                                </div>
                                <div style="flex: 1;">
                                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 6px;">
                                        <div>
                                            <div style="font-size: 15px; font-weight: 600; color: #92400e; margin-bottom: 3px;">Model showing data drift in income patterns</div>
                                            <div style="font-size: 13px; color: #78350f; line-height: 1.5;">Consider retraining soon - PSI score reached 0.18 threshold</div>
                                        </div>
                                        <div style="background: #f59e0b; color: white; padding: 3px 10px; border-radius: 4px; font-size: 11px; font-weight: 600;">REVIEW</div>
                                    </div>
                                    <div style="font-size: 12px; color: #92400e; margin-top: 6px;">
                                        Model Monitoring • Detected yesterday
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Info Alert -->
                        <div style="background: #eff6ff; border-left: 4px solid #3b82f6; padding: 18px 24px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); cursor: pointer;" onclick="showAlertDetails('info')">
                            <div style="display: flex; align-items: start; gap: 14px;">
                                <div style="background: #3b82f6; width: 36px; height: 36px; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                    <svg width="20" height="20" fill="white" viewBox="0 0 16 16">
                                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
                                    </svg>
                                </div>
                                <div style="flex: 1;">
                                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 6px;">
                                        <div>
                                            <div style="font-size: 15px; font-weight: 600; color: #1e40af; margin-bottom: 3px;">Collections running 1.2% above target this month</div>
                                            <div style="font-size: 13px; color: #1e3a8a; line-height: 1.5;">Early intervention approach continues to show good results</div>
                                        </div>
                                    </div>
                                    <div style="font-size: 12px; color: #1e40af; margin-top: 6px;">
                                        Portfolio Update • As of today
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- KPI Cards -->
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon" style="background: #dbeafe; color: #1e40af;">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M1 3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1H1zm7 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/>
                                        <path d="M0 5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V5zm3 0a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2V7a2 2 0 0 1-2-2H3z"/>
                                    </svg>
                                </div>
                                <div class="kpi-label">Total Active<br>Loans</div>
                            </div>
                            <div>
                                <div class="kpi-value">24,582</div>
                                <div class="kpi-trend trend-up">↑ 3.2%</div>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon" style="background: #fee2e2; color: #dc2626;">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                        <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                                    </svg>
                                </div>
                                <div class="kpi-label">At-Risk<br>Customers</div>
                            </div>
                            <div>
                                <div class="kpi-value">1,847</div>
                                <div class="kpi-trend trend-down">↓ 5.8%</div>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon" style="background: #fef3c7; color: #92400e;">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                                    </svg>
                                </div>
                                <div class="kpi-label">30-Day<br>Delinquency</div>
                            </div>
                            <div>
                                <div class="kpi-value">4.2%</div>
                                <div class="kpi-trend trend-down">↓ 1.3%</div>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon" style="background: #fed7aa; color: #92400e;">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718H4zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73l.348.086z"/>
                                    </svg>
                                </div>
                                <div class="kpi-label">Portfolio<br>Loss</div>
                            </div>
                            <div>
                                <div class="kpi-value">₹12.4M</div>
                                <div class="kpi-trend trend-down">↓ 8.5%</div>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon" style="background: #d1fae5; color: #065f46;">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                                    </svg>
                                </div>
                                <div class="kpi-label">Intervention<br>Success</div>
                            </div>
                            <div>
                                <div class="kpi-value">76.3%</div>
                                <div class="kpi-trend trend-up">↑ 4.1%</div>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon" style="background: #e0e7ff; color: #3730a3;">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M4 11H2v3h2v-3zm5-4H7v7h2V7zm5-5v12h-2V2h2zm-2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-2zM6 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm-5 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3z"/>
                                    </svg>
                                </div>
                                <div class="kpi-label">Average<br>Portfolio PD</div>
                            </div>
                            <div>
                                <div class="kpi-value">18.9%</div>
                                <div class="kpi-trend trend-up">↑ 6.2%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Row 1 -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
                        <div class="chart-card">
                            <div class="chart-header">
                                <div>
                                    <div class="chart-title">Risk Distribution</div>
                                    <div class="chart-subtitle">Portfolio segmentation by risk level</div>
                                </div>
                            </div>
                            <canvas id="riskDistChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <div>
                                    <div class="chart-title">Risk Trend Analysis</div>
                                    <div class="chart-subtitle">6-month delinquency rate tracking</div>
                                </div>
                            </div>
                            <canvas id="riskTrendChart"></canvas>
                        </div>
                    </div>

                    <!-- Charts Row 2 -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
                        <div class="chart-card">
                            <div class="chart-header">
                                <div>
                                    <div class="chart-title">Risk by Loan Product Type</div>
                                    <div class="chart-subtitle">Distribution across product categories</div>
                                </div>
                            </div>
                            <canvas id="loanTypeChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <div>
                                    <div class="chart-title">Regional Risk Analysis</div>
                                    <div class="chart-subtitle">Geographic risk concentration</div>
                                </div>
                            </div>
                            <canvas id="regionalChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- PAGE 2: PORTFOLIO RISK -->
                <div id="page-portfolio" class="page">
                    <div class="page-header">
                        <h1 class="page-title">Portfolio Risk Analysis</h1>
                        <p class="page-subtitle">Comprehensive view of loan portfolio distribution and risk concentration</p>
                    </div>

                    <!-- Portfolio Summary Cards -->
                    <div class="kpi-grid" style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));">
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div style="flex: 1;">
                                    <div class="kpi-label">Total Portfolio Value</div>
                                </div>
                                <div class="kpi-icon" style="background: #dbeafe; color: #1e40af;">
                                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M1 3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1H1zm7 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/>
                                        <path d="M0 5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V5zm3 0a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2V7a2 2 0 0 1-2-2H3z"/>
                                    </svg>
                                </div>
                            </div>
                            <div>
                                <div class="kpi-value">₹845.2Cr</div>
                                <div class="kpi-trend trend-up">
                                    <span>↑ 12.4%</span>
                                </div>
                                <div class="kpi-subtitle">YoY Growth</div>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div style="flex: 1;">
                                    <div class="kpi-label">Healthy Loans</div>
                                </div>
                                <div class="kpi-icon" style="background: #d1fae5; color: #065f46;">
                                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                                    </svg>
                                </div>
                            </div>
                            <div>
                                <div class="kpi-value">22,735</div>
                                <div class="kpi-trend trend-up">
                                    <span>92.5%</span>
                                </div>
                                <div class="kpi-subtitle">Of total loans</div>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div style="flex: 1;">
                                    <div class="kpi-label">Avg Loan Size</div>
                                </div>
                                <div class="kpi-icon" style="background: #e0e7ff; color: #3730a3;">
                                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718H4zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73l.348.086z"/>
                                    </svg>
                                </div>
                            </div>
                            <div>
                                <div class="kpi-value">₹3.4L</div>
                                <div class="kpi-trend trend-up">
                                    <span>↑ 2.8%</span>
                                </div>
                                <div class="kpi-subtitle">Per customer</div>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div style="flex: 1;">
                                    <div class="kpi-label">NPL Ratio</div>
                                </div>
                                <div class="kpi-icon" style="background: #fef3c7; color: #92400e;">
                                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                        <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                                    </svg>
                                </div>
                            </div>
                            <div>
                                <div class="kpi-value">2.8%</div>
                                <div class="kpi-trend trend-down">
                                    <span>↓ 0.6%</span>
                                </div>
                                <div class="kpi-subtitle">Industry avg: 3.2%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Portfolio Breakdown -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
                        <div class="chart-card">
                            <div class="chart-header">
                                <div>
                                    <div class="chart-title">Portfolio by Loan Product Type</div>
                                    <div class="chart-subtitle">Distribution across product categories</div>
                                </div>
                            </div>
                            <div style="padding: 20px;">
                                <canvas id="portfolioTypeChart" style="max-height: 300px;"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <div>
                                    <div class="chart-title">Portfolio by Tenure</div>
                                    <div class="chart-subtitle">Loan maturity distribution</div>
                                </div>
                            </div>
                            <div style="padding: 20px;">
                                <canvas id="tenureChart" style="max-height: 300px;"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Detailed Portfolio Table -->
                    <div class="table-card">
                        <div class="table-header">
                            <div class="table-title">Loan Product Performance</div>
                            <div class="table-actions">
                                <button class="btn btn-secondary">
                                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                                    </svg>
                                    Export
                                </button>
                            </div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Loan Product Type</th>
                                        <th>Active Loans</th>
                                        <th>Total Value</th>
                                        <th>Avg Ticket Size</th>
                                        <th>At-Risk Count</th>
                                        <th>Risk %</th>
                                        <th>NPL Ratio</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Personal Loan</strong></td>
                                        <td>9,847</td>
                                        <td>₹285.4 Cr</td>
                                        <td>₹2.9 L</td>
                                        <td>842</td>
                                        <td><strong style="color: #f59e0b;">8.6%</strong></td>
                                        <td>3.2%</td>
                                        <td><span class="badge badge-medium">Monitor</span></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Home Loan</strong></td>
                                        <td>6,234</td>
                                        <td>₹398.7 Cr</td>
                                        <td>₹6.4 L</td>
                                        <td>521</td>
                                        <td><strong style="color: #10b981;">8.4%</strong></td>
                                        <td>2.1%</td>
                                        <td><span class="badge badge-low">Healthy</span></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Auto Loan</strong></td>
                                        <td>4,892</td>
                                        <td>₹95.6 Cr</td>
                                        <td>₹1.9 L</td>
                                        <td>287</td>
                                        <td><strong style="color: #10b981;">5.9%</strong></td>
                                        <td>2.4%</td>
                                        <td><span class="badge badge-low">Healthy</span></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Business Loan</strong></td>
                                        <td>2,456</td>
                                        <td>₹52.3 Cr</td>
                                        <td>₹2.1 L</td>
                                        <td>164</td>
                                        <td><strong style="color: #ef4444;">6.7%</strong></td>
                                        <td>4.8%</td>
                                        <td><span class="badge badge-high">Watch</span></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Education Loan</strong></td>
                                        <td>1,153</td>
                                        <td>₹13.2 Cr</td>
                                        <td>₹1.1 L</td>
                                        <td>33</td>
                                        <td><strong style="color: #10b981;">2.9%</strong></td>
                                        <td>1.5%</td>
                                        <td><span class="badge badge-low">Excellent</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Regional Distribution -->
                    <div style="margin-top: 32px;">
                        <div class="chart-card">
                            <div class="chart-header">
                                <div>
                                    <div class="chart-title">Geographic Portfolio Distribution</div>
                                    <div class="chart-subtitle">Top performing regions and branches</div>
                                </div>
                            </div>
                            <div style="padding: 24px;">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                                    <div style="padding: 20px; background: #f8f9fb; border-radius: 12px;">
                                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                                            <div>
                                                <div style="font-size: 14px; font-weight: 600; color: #0f172a; margin-bottom: 4px;">Mumbai Region</div>
                                                <div style="font-size: 13px; color: #64748b;">5 branches</div>
                                            </div>
                                            <div style="font-size: 24px; font-weight: 700; color: #1e40af;">₹245Cr</div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-size: 13px; margin-top: 12px;">
                                            <span style="color: #64748b;">Active Loans:</span>
                                            <strong>7,842</strong>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-size: 13px; margin-top: 8px;">
                                            <span style="color: #64748b;">Risk Level:</span>
                                            <strong style="color: #f59e0b;">Medium (7.2%)</strong>
                                        </div>
                                    </div>

                                    <div style="padding: 20px; background: #f8f9fb; border-radius: 12px;">
                                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                                            <div>
                                                <div style="font-size: 14px; font-weight: 600; color: #0f172a; margin-bottom: 4px;">Delhi NCR</div>
                                                <div style="font-size: 13px; color: #64748b;">4 branches</div>
                                            </div>
                                            <div style="font-size: 24px; font-weight: 700; color: #1e40af;">₹198Cr</div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-size: 13px; margin-top: 12px;">
                                            <span style="color: #64748b;">Active Loans:</span>
                                            <strong>6,234</strong>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-size: 13px; margin-top: 8px;">
                                            <span style="color: #64748b;">Risk Level:</span>
                                            <strong style="color: #10b981;">Low (5.8%)</strong>
                                        </div>
                                    </div>

                                    <div style="padding: 20px; background: #f8f9fb; border-radius: 12px;">
                                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                                            <div>
                                                <div style="font-size: 14px; font-weight: 600; color: #0f172a; margin-bottom: 4px;">Bangalore</div>
                                                <div style="font-size: 13px; color: #64748b;">6 branches</div>
                                            </div>
                                            <div style="font-size: 24px; font-weight: 700; color: #1e40af;">₹187Cr</div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-size: 13px; margin-top: 12px;">
                                            <span style="color: #64748b;">Active Loans:</span>
                                            <strong>5,921</strong>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-size: 13px; margin-top: 8px;">
                                            <span style="color: #64748b;">Risk Level:</span>
                                            <strong style="color: #10b981;">Low (6.1%)</strong>
                                        </div>
                                    </div>

                                    <div style="padding: 20px; background: #f8f9fb; border-radius: 12px;">
                                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                                            <div>
                                                <div style="font-size: 14px; font-weight: 600; color: #0f172a; margin-bottom: 4px;">Other Regions</div>
                                                <div style="font-size: 13px; color: #64748b;">12 branches</div>
                                            </div>
                                            <div style="font-size: 24px; font-weight: 700; color: #1e40af;">₹214Cr</div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-size: 13px; margin-top: 12px;">
                                            <span style="color: #64748b;">Active Loans:</span>
                                            <strong>4,585</strong>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-size: 13px; margin-top: 8px;">
                                            <span style="color: #64748b;">Risk Level:</span>
                                            <strong style="color: #10b981;">Low (6.5%)</strong>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Additional Portfolio Analytics -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-top: 32px;">
                        <div class="chart-card">
                            <div class="chart-header">
                                <div>
                                    <div class="chart-title">Portfolio Growth Trend</div>
                                    <div class="chart-subtitle">Month-over-month portfolio value</div>
                                </div>
                            </div>
                            <div style="padding: 20px;">
                                <canvas id="portfolioGrowthChart" style="max-height: 300px;"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <div>
                                    <div class="chart-title">Disbursement vs Collection</div>
                                    <div class="chart-subtitle">Last 6 months comparison</div>
                                </div>
                            </div>
                            <div style="padding: 20px;">
                                <canvas id="disbursementChart" style="max-height: 300px;"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Portfolio Health Metrics -->
                    <div class="chart-card" style="margin-top: 32px;">
                        <div class="chart-header">
                            <div>
                                <div class="chart-title">Portfolio Health Indicators</div>
                                <div class="chart-subtitle">Key performance metrics across loan products</div>
                            </div>
                        </div>
                        <div style="padding: 24px;">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 24px;">
                                <div style="text-align: center; padding: 20px; background: linear-gradient(135deg, #dbeafe 0%, #eff6ff 100%); border-radius: 12px;">
                                    <div style="font-size: 48px; font-weight: 800; color: #1e40af; margin-bottom: 8px;">96.2%</div>
                                    <div style="font-size: 14px; font-weight: 600; color: #475569;">Collection Efficiency</div>
                                    <div style="font-size: 12px; color: #64748b; margin-top: 4px;">Target: 95%</div>
                                </div>
                                <div style="text-align: center; padding: 20px; background: linear-gradient(135deg, #d1fae5 0%, #ecfdf5 100%); border-radius: 12px;">
                                    <div style="font-size: 48px; font-weight: 800; color: #065f46; margin-bottom: 8px;">₹642Cr</div>
                                    <div style="font-size: 14px; font-weight: 600; color: #475569;">YTD Disbursements</div>
                                    <div style="font-size: 12px; color: #64748b; margin-top: 4px;">+24% YoY</div>
                                </div>
                                <div style="text-align: center; padding: 20px; background: linear-gradient(135deg, #fef3c7 0%, #fefce8 100%); border-radius: 12px;">
                                    <div style="font-size: 48px; font-weight: 800; color: #92400e; margin-bottom: 8px;">2.1%</div>
                                    <div style="font-size: 14px; font-weight: 600; color: #475569;">Average ROI</div>
                                    <div style="font-size: 12px; color: #64748b; margin-top: 4px;">Industry: 1.8%</div>
                                </div>
                                <div style="text-align: center; padding: 20px; background: linear-gradient(135deg, #e0e7ff 0%, #eef2ff 100%); border-radius: 12px;">
                                    <div style="font-size: 48px; font-weight: 800; color: #3730a3; margin-bottom: 8px;">18.5M</div>
                                    <div style="font-size: 14px; font-weight: 600; color: #475569;">Active Customers</div>
                                    <div style="font-size: 12px; color: #64748b; margin-top: 4px;">+12% growth</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PAGE 3: CUSTOMER PROFILE LOOKUP -->
                <div id="page-customer" class="page">
                    <div class="page-header">
                        <h1 class="page-title">Advanced Customer Risk Search</h1>
                        <p class="page-subtitle">Comprehensive customer lookup using financial and behavioral parameters</p>
                    </div>

                    <!-- Advanced Search Form -->
                    <div class="chart-card" style="margin-bottom: 32px;">
                        <div class="chart-header" style="border-bottom: 1px solid #e2e8f0; padding-bottom: 16px; margin-bottom: 24px;">
                            <div>
                                <div class="chart-title">Customer Search Parameters</div>
                                <div class="chart-subtitle">Enter criteria to identify and analyze customer risk profile</div>
                            </div>
                        </div>

                        <!-- Section 1: Customer Identification & Segmentation -->
                        <div style="margin-bottom: 24px;">
                            <div style="background: #f8f9fb; padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;" onclick="toggleSection('section1')">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="background: #3b82f6; width: 32px; height: 32px; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 14px;">1</div>
                                    <div>
                                        <div style="font-size: 15px; font-weight: 600; color: #0f172a;">Customer Identification & Segmentation</div>
                                        <div style="font-size: 12px; color: #64748b;">Who is the customer?</div>
                                    </div>
                                </div>
                                <svg id="section1-icon" width="20" height="20" fill="#64748b" viewBox="0 0 16 16" style="transition: transform 0.3s;">
                                    <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                                </svg>
                            </div>
                            <div id="section1" style="padding: 20px; background: white; border: 1px solid #e2e8f0; border-radius: 8px;">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 16px;">
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">Customer ID *</label>
                                        <input type="text" id="customerId" placeholder="e.g., CUS-15847" class="form-input">
                                    </div>
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">Month</label>
                                        <select id="month" class="form-input">
                                            <option value="">Select Month</option>
                                            <option value="Jan">January</option>
                                            <option value="Feb" selected>February</option>
                                            <option value="Mar">March</option>
                                            <option value="Apr">April</option>
                                            <option value="May">May</option>
                                            <option value="Jun">June</option>
                                            <option value="Jul">July</option>
                                            <option value="Aug">August</option>
                                            <option value="Sep">September</option>
                                            <option value="Oct">October</option>
                                            <option value="Nov">November</option>
                                            <option value="Dec">December</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">Segment</label>
                                        <select id="segment" class="form-input">
                                            <option value="">Select Segment</option>
                                            <option value="Retail" selected>Retail</option>
                                            <option value="SME">SME</option>
                                            <option value="Corporate">Corporate</option>
                                            <option value="Priority">Priority Banking</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">Region Tier</label>
                                        <select id="regionTier" class="form-input">
                                            <option value="">Select Tier</option>
                                            <option value="Tier1" selected>Tier 1 (Metro)</option>
                                            <option value="Tier2">Tier 2 (Urban)</option>
                                            <option value="Tier3">Tier 3 (Semi-Urban)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">Product Type</label>
                                        <select id="productType" class="form-input">
                                            <option value="">Select Product</option>
                                            <option value="Personal" selected>Personal Loan</option>
                                            <option value="Home">Home Loan</option>
                                            <option value="Auto">Auto Loan</option>
                                            <option value="Business">Business Loan</option>
                                            <option value="Education">Education Loan</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Section 2: Credit Exposure & Liability Profile -->
                        <div style="margin-bottom: 24px;">
                            <div style="background: #f8f9fb; padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;" onclick="toggleSection('section2')">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="background: #3b82f6; width: 32px; height: 32px; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 14px;">2</div>
                                    <div>
                                        <div style="font-size: 15px; font-weight: 600; color: #0f172a;">Credit Exposure & Liability Profile</div>
                                        <div style="font-size: 12px; color: #64748b;">How much debt does the customer carry?</div>
                                    </div>
                                </div>
                                <svg id="section2-icon" width="20" height="20" fill="#64748b" viewBox="0 0 16 16" style="transition: transform 0.3s; transform: rotate(-90deg);">
                                    <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                                </svg>
                            </div>
                            <div id="section2" style="display: none; padding: 20px; background: white; border: 1px solid #e2e8f0; border-radius: 8px;">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 16px;">
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">Active Products</label>
                                        <input type="number" id="activeProducts" placeholder="e.g., 3" class="form-input" min="1" max="10">
                                    </div>
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">Credit Utilization (%)</label>
                                        <input type="number" id="creditUtilization" placeholder="e.g., 75" class="form-input" min="0" max="100">
                                    </div>
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">Total Obligation (₹)</label>
                                        <input type="number" id="totalObligation" placeholder="e.g., 485000" class="form-input">
                                    </div>
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">EMI Amount (₹)</label>
                                        <input type="number" id="emiAmount" placeholder="e.g., 18500" class="form-input">
                                    </div>
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">Days to EMI</label>
                                        <input type="number" id="daysToEmi" placeholder="e.g., 15" class="form-input" min="0" max="31">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Section 3: Income Stability & Cashflow Analysis -->
                        <div style="margin-bottom: 24px;">
                            <div style="background: #f8f9fb; padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;" onclick="toggleSection('section3')">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="background: #3b82f6; width: 32px; height: 32px; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 14px;">3</div>
                                    <div>
                                        <div style="font-size: 15px; font-weight: 600; color: #0f172a;">Income Stability & Cashflow Analysis</div>
                                        <div style="font-size: 12px; color: #64748b;">Can the customer repay?</div>
                                    </div>
                                </div>
                                <svg id="section3-icon" width="20" height="20" fill="#64748b" viewBox="0 0 16 16" style="transition: transform 0.3s; transform: rotate(-90deg);">
                                    <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                                </svg>
                            </div>
                            <div id="section3" style="display: none; padding: 20px; background: white; border: 1px solid #e2e8f0; border-radius: 8px;">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 16px;">
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">Monthly Income (₹)</label>
                                        <input type="number" id="monthlyIncome" placeholder="e.g., 75000" class="form-input">
                                    </div>
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">EMI / Income Ratio (%)</label>
                                        <input type="number" id="emiIncomeRatio" placeholder="Auto-calculated or manual" class="form-input" min="0" max="100">
                                    </div>
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">Balance Change (₹)</label>
                                        <input type="number" id="balanceChange" placeholder="e.g., -15000 (negative for decrease)" class="form-input">
                                    </div>
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">ATM Withdrawal (₹)</label>
                                        <input type="number" id="atmWithdrawal" placeholder="e.g., 25000" class="form-input">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Section 4: Repayment Behaviour & Discipline -->
                        <div style="margin-bottom: 24px;">
                            <div style="background: #f8f9fb; padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;" onclick="toggleSection('section4')">
                                <div style="display: flex; align-items: center; gap: 12px;">
                                    <div style="background: #3b82f6; width: 32px; height: 32px; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 14px;">4</div>
                                    <div>
                                        <div style="font-size: 15px; font-weight: 600; color: #0f172a;">Repayment Behaviour & Discipline</div>
                                        <div style="font-size: 12px; color: #64748b;">How reliable is the customer?</div>
                                    </div>
                                </div>
                                <svg id="section4-icon" width="20" height="20" fill="#64748b" viewBox="0 0 16 16" style="transition: transform 0.3s; transform: rotate(-90deg);">
                                    <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                                </svg>
                            </div>
                            <div id="section4" style="display: none; padding: 20px; background: white; border: 1px solid #e2e8f0; border-radius: 8px;">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 16px;">
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">Salary Delay Days</label>
                                        <input type="number" id="salaryDelay" placeholder="e.g., 5" class="form-input" min="0" max="60">
                                    </div>
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px;">Payment History</label>
                                        <select id="paymentHistory" class="form-input">
                                            <option value="">Select History</option>
                                            <option value="Excellent">Excellent (No delays)</option>
                                            <option value="Good">Good (1-2 delays)</option>
                                            <option value="Fair">Fair (3-4 delays)</option>
                                            <option value="Poor">Poor (5+ delays)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Search Button -->
                        <div style="padding: 20px; background: #f8f9fb; border-radius: 8px; display: flex; gap: 12px; justify-content: center; align-items: center;">
                            <button class="btn btn-primary" onclick="performAdvancedSearch()" style="padding: 14px 48px; font-size: 15px; font-weight: 600;">
                                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: 10px;">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                </svg>
                                Search Customer Profile
                            </button>
                            <button class="btn btn-secondary" onclick="resetAdvancedSearch()" style="padding: 14px 32px; font-size: 15px;">
                                Reset All Fields
                            </button>
                        </div>

                        <div id="advancedSearchStatus" style="text-align: center; margin-top: 16px; font-size: 14px;"></div>
                    </div>

                    <!-- Customer Details Section (Initially Hidden) -->
                    <div id="customerDetailsSection" style="display: none;">
                        <div style="background: #f8f9fb; padding: 16px 24px; border-radius: 12px; margin-bottom: 24px; border-left: 4px solid #3b82f6;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <div style="font-size: 18px; font-weight: 700; color: #0f172a; margin-bottom: 4px;">
                                        Showing results for: <span id="displayCustomerId"></span>
                                    </div>
                                    <div style="font-size: 14px; color: #64748b;">
                                        Customer Name: <strong id="displayCustomerName"></strong>
                                    </div>
                                </div>
                                <button class="btn btn-secondary" onclick="clearCustomerSearch()" style="padding: 8px 20px;">
                                    Search Another Customer
                                </button>
                            </div>
                        </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 32px;" id="customerRiskCards">
                        <!-- Risk Score Gauge -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <div>
                                    <div class="chart-title">Overall Risk Score</div>
                                    <div class="chart-subtitle">Calculated using ML prediction model</div>
                                </div>
                            </div>
                            <div class="risk-gauge-container">
                                <div class="risk-gauge">
                                    <canvas id="riskGaugeChart"></canvas>
                                    <div class="gauge-score">
                                        <div class="gauge-value">73</div>
                                        <div class="gauge-label">High Risk</div>
                                    </div>
                                </div>
                            </div>
                            <div style="padding: 0 24px 24px; display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                <div>
                                    <div style="font-size: 13px; color: #64748b; margin-bottom: 4px;">Delinquency Probability</div>
                                    <div style="font-size: 20px; font-weight: 700; color: #ef4444;">68.5%</div>
                                </div>
                                <div>
                                    <div style="font-size: 13px; color: #64748b; margin-bottom: 4px;">Confidence Score</div>
                                    <div style="font-size: 20px; font-weight: 700; color: #0f172a;">91.2%</div>
                                </div>
                            </div>
                        </div>

                        <!-- Customer Overview -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <div>
                                    <div class="chart-title">Customer Overview</div>
                                    <div class="chart-subtitle">Account details and loan information</div>
                                </div>
                            </div>
                            <div style="padding: 20px 0;">
                                <div style="display: grid; gap: 16px; padding: 0 24px;">
                                    <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                        <span style="color: #64748b; font-size: 14px;">Customer Name</span>
                                        <span style="font-weight: 600; font-size: 14px;">Rajesh Kumar Sharma</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                        <span style="color: #64748b; font-size: 14px;">Loan Type</span>
                                        <span style="font-weight: 600; font-size: 14px;">Personal Loan</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                        <span style="color: #64748b; font-size: 14px;">Outstanding Amount</span>
                                        <span style="font-weight: 600; font-size: 14px;">₹4,85,000</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                        <span style="color: #64748b; font-size: 14px;">Monthly EMI</span>
                                        <span style="font-weight: 600; font-size: 14px;">₹18,500</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                        <span style="color: #64748b; font-size: 14px;">Account Age</span>
                                        <span style="font-weight: 600; font-size: 14px;">28 months</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; padding: 12px 0;">
                                        <span style="color: #64748b; font-size: 14px;">Branch</span>
                                        <span style="font-weight: 600; font-size: 14px;">Mumbai Central</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Risk Drivers -->
                    <div class="chart-card" style="margin-bottom: 24px;">
                        <div class="chart-header">
                            <div>
                                <div class="chart-title">Risk Driver Analysis</div>
                                <div class="chart-subtitle">Factors contributing to elevated risk score</div>
                            </div>
                        </div>
                        <div style="padding: 24px;">
                            <div style="margin-bottom: 20px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="font-size: 14px; font-weight: 600;">Income Drop (Last 3 months)</span>
                                    <span style="font-size: 14px; font-weight: 700; color: #ef4444;">-35%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 85%; background: linear-gradient(90deg, #ef4444 0%, #dc2626 100%);"></div>
                                </div>
                            </div>
                            <div style="margin-bottom: 20px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="font-size: 14px; font-weight: 600;">High Credit Utilization</span>
                                    <span style="font-size: 14px; font-weight: 700; color: #f97316;">92%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 92%; background: linear-gradient(90deg, #f97316 0%, #ea580c 100%);"></div>
                                </div>
                            </div>
                            <div style="margin-bottom: 20px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="font-size: 14px; font-weight: 600;">Spending Spike (Discretionary)</span>
                                    <span style="font-size: 14px; font-weight: 700; color: #f59e0b;">+48%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 70%; background: linear-gradient(90deg, #f59e0b 0%, #d97706 100%);"></div>
                                </div>
                            </div>
                            <div style="margin-bottom: 20px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="font-size: 14px; font-weight: 600;">EMI Bounce History</span>
                                    <span style="font-size: 14px; font-weight: 700; color: #f59e0b;">2 in 6 months</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 65%; background: linear-gradient(90deg, #f59e0b 0%, #d97706 100%);"></div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="font-size: 14px; font-weight: 600;">Account Balance Dip</span>
                                    <span style="font-size: 14px; font-weight: 700; color: #eab308;">-42%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 55%; background: linear-gradient(90deg, #eab308 0%, #ca8a04 100%);"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Row -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                        <!-- Behavioral Timeline -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <div>
                                    <div class="chart-title">Behavioral Timeline</div>
                                    <div class="chart-subtitle">Recent financial events and patterns</div>
                                </div>
                            </div>
                            <div class="timeline">
                                <div class="timeline-item">
                                    <div class="timeline-dot" style="background: #fecaca; color: #991b1b;">
                                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                            <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                                        </svg>
                                    </div>
                                    <div class="timeline-content">
                                        <div class="timeline-title">EMI Payment Missed</div>
                                        <div class="timeline-desc">February EMI bounced - insufficient funds</div>
                                        <div class="timeline-date">Feb 05, 2026</div>
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-dot" style="background: #fed7aa; color: #92400e;">
                                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                            <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                                        </svg>
                                    </div>
                                    <div class="timeline-content">
                                        <div class="timeline-title">Salary Deposit Delayed</div>
                                        <div class="timeline-desc">Monthly salary 15 days late</div>
                                        <div class="timeline-date">Jan 20, 2026</div>
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-dot" style="background: #fef3c7; color: #92400e;">
                                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                            <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                                        </svg>
                                    </div>
                                    <div class="timeline-content">
                                        <div class="timeline-title">High Expenditure Detected</div>
                                        <div class="timeline-desc">₹45,000 discretionary spending spike</div>
                                        <div class="timeline-date">Jan 12, 2026</div>
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-dot" style="background: #fed7aa; color: #92400e;">
                                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                            <path d="M0 3a2 2 0 0 1 2-2h13.5a.5.5 0 0 1 0 1H15v2a1 1 0 0 1 1 1v8.5a1.5 1.5 0 0 1-1.5 1.5h-12A2.5 2.5 0 0 1 0 12.5V3zm1 1.732V12.5A1.5 1.5 0 0 0 2.5 14h12a.5.5 0 0 0 .5-.5V5H2a1.99 1.99 0 0 1-1-.268zM1 3a1 1 0 0 0 1 1h12V2H2a1 1 0 0 0-1 1z"/>
                                        </svg>
                                    </div>
                                    <div class="timeline-content">
                                        <div class="timeline-title">Account Balance Low</div>
                                        <div class="timeline-desc">Balance below ₹5,000 for 10+ days</div>
                                        <div class="timeline-date">Dec 28, 2025</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Recommended Actions -->
                        <div class="action-panel">
                            <div class="chart-header" style="margin-bottom: 20px;">
                                <div>
                                    <div class="chart-title">Recommended Actions</div>
                                    <div class="chart-subtitle">Proactive interventions to prevent delinquency</div>
                                </div>
                            </div>
                            <div class="action-item" style="border-color: #ef4444; background: #fef2f2;">
                                <div class="action-title">🔴 Immediate: Send Payment Reminder</div>
                                <div class="action-meta">
                                    <span><strong>Urgency:</strong> Critical</span>
                                    <span><strong>Impact:</strong> 12-15% recovery</span>
                                </div>
                            </div>
                            <div class="action-item">
                                <div class="action-title">📞 Assign Relationship Manager</div>
                                <div class="action-meta">
                                    <span><strong>Urgency:</strong> High</span>
                                    <span><strong>Impact:</strong> 18-22% recovery</span>
                                </div>
                            </div>
                            <div class="action-item">
                                <div class="action-title">💳 Offer EMI Restructuring</div>
                                <div class="action-meta">
                                    <span><strong>Urgency:</strong> Medium</span>
                                    <span><strong>Impact:</strong> 25-30% recovery</span>
                                </div>
                            </div>
                            <div class="action-item">
                                <div class="action-title">⏰ Provide 15-Day Grace Period</div>
                                <div class="action-meta">
                                    <span><strong>Urgency:</strong> Medium</span>
                                    <span><strong>Impact:</strong> 8-12% recovery</span>
                                </div>
                            </div>
                            <div style="margin-top: 20px; display: flex; gap: 12px;">
                                <button class="btn btn-primary" style="flex: 1;">Execute All Actions</button>
                                <button class="btn btn-secondary">Customize Plan</button>
                            </div>
                        </div>
                    </div>
                    </div>
                    <!-- End of Customer Details Section -->
                </div>

                <!-- PAGE 4: OPERATIONS TRACKER -->
                <div id="page-operations" class="page">
                    <div class="page-header">
                        <h1 class="page-title">User Operation Tracker</h1>
                        <p class="page-subtitle">Manage daily interventions and track customer engagement</p>
                    </div>

                    <!-- Filter Panel -->
                    <div class="filter-panel">
                        <div class="filter-grid">
                            <div class="filter-group">
                                <label>Branch</label>
                                <select>
                                    <option>All Branches</option>
                                    <option>Mumbai Central</option>
                                    <option>Delhi NCR</option>
                                    <option>Bangalore Tech Park</option>
                                    <option>Pune Hinjewadi</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>Loan Product Type</label>
                                <select>
                                    <option>All Types</option>
                                    <option>Personal Loan</option>
                                    <option>Home Loan</option>
                                    <option>Auto Loan</option>
                                    <option>Business Loan</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>Risk Level</label>
                                <select>
                                    <option>All Levels</option>
                                    <option>Critical</option>
                                    <option>High</option>
                                    <option>Medium</option>
                                    <option>Low</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>Action Status</label>
                                <select>
                                    <option>All Status</option>
                                    <option>Pending</option>
                                    <option>In Progress</option>
                                    <option>Completed</option>
                                    <option>Escalated</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Customer Table -->
                    <div class="table-card">
                        <div class="table-header">
                            <div class="table-title">At-Risk Customer Portfolio</div>
                            <div class="table-actions">
                                <button class="btn btn-secondary">
                                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                                    </svg>
                                    Export CSV
                                </button>
                                <button class="btn btn-primary">
                                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                    </svg>
                                    Bulk Action
                                </button>
                            </div>
                        </div>
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Customer ID</th>
                                        <th>Name</th>
                                        <th>Loan Product Type</th>
                                        <th>Risk Score</th>
                                        <th>Probability</th>
                                        <th>Recommended Action</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="cursor: pointer;" onclick="showPage('customer')">
                                        <td><strong>CUS-15847</strong></td>
                                        <td>Rajesh Kumar Sharma</td>
                                        <td>Personal Loan</td>
                                        <td><span class="badge badge-high">73</span></td>
                                        <td><strong style="color: #ef4444;">68.5%</strong></td>
                                        <td>Assign RM + Restructure</td>
                                        <td><span class="badge badge-medium">In Progress</span></td>
                                        <td>
                                            <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;">View</button>
                                        </td>
                                    </tr>
                                    <tr style="cursor: pointer;">
                                        <td><strong>CUS-18234</strong></td>
                                        <td>Priya Desai</td>
                                        <td>Home Loan</td>
                                        <td><span class="badge badge-critical">82</span></td>
                                        <td><strong style="color: #dc2626;">79.2%</strong></td>
                                        <td>Immediate Contact</td>
                                        <td><span class="badge badge-high">Pending</span></td>
                                        <td>
                                            <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;">View</button>
                                        </td>
                                    </tr>
                                    <tr style="cursor: pointer;">
                                        <td><strong>CUS-12903</strong></td>
                                        <td>Amit Patel</td>
                                        <td>Auto Loan</td>
                                        <td><span class="badge badge-high">71</span></td>
                                        <td><strong style="color: #ef4444;">65.8%</strong></td>
                                        <td>Send Reminder</td>
                                        <td><span class="badge badge-low">Completed</span></td>
                                        <td>
                                            <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;">View</button>
                                        </td>
                                    </tr>
                                    <tr style="cursor: pointer;">
                                        <td><strong>CUS-19475</strong></td>
                                        <td>Sanjay Mehta</td>
                                        <td>Business Loan</td>
                                        <td><span class="badge badge-critical">85</span></td>
                                        <td><strong style="color: #dc2626;">82.1%</strong></td>
                                        <td>Grace Period + RM</td>
                                        <td><span class="badge badge-medium">In Progress</span></td>
                                        <td>
                                            <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;">View</button>
                                        </td>
                                    </tr>
                                    <tr style="cursor: pointer;">
                                        <td><strong>CUS-14582</strong></td>
                                        <td>Neha Agarwal</td>
                                        <td>Personal Loan</td>
                                        <td><span class="badge badge-medium">58</span></td>
                                        <td><strong style="color: #f59e0b;">52.3%</strong></td>
                                        <td>Monitor Closely</td>
                                        <td><span class="badge badge-medium">In Progress</span></td>
                                        <td>
                                            <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;">View</button>
                                        </td>
                                    </tr>
                                    <tr style="cursor: pointer;">
                                        <td><strong>CUS-17629</strong></td>
                                        <td>Vikram Singh</td>
                                        <td>Home Loan</td>
                                        <td><span class="badge badge-high">76</span></td>
                                        <td><strong style="color: #ef4444;">71.4%</strong></td>
                                        <td>Offer Restructuring</td>
                                        <td><span class="badge badge-high">Pending</span></td>
                                        <td>
                                            <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;">View</button>
                                        </td>
                                    </tr>
                                    <tr style="cursor: pointer;">
                                        <td><strong>CUS-13847</strong></td>
                                        <td>Kavita Reddy</td>
                                        <td>Auto Loan</td>
                                        <td><span class="badge badge-medium">62</span></td>
                                        <td><strong style="color: #f97316;">56.7%</strong></td>
                                        <td>Send Reminder</td>
                                        <td><span class="badge badge-low">Completed</span></td>
                                        <td>
                                            <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;">View</button>
                                        </td>
                                    </tr>
                                    <tr style="cursor: pointer;">
                                        <td><strong>CUS-16274</strong></td>
                                        <td>Arjun Nair</td>
                                        <td>Personal Loan</td>
                                        <td><span class="badge badge-high">69</span></td>
                                        <td><strong style="color: #ef4444;">63.9%</strong></td>
                                        <td>Assign RM</td>
                                        <td><span class="badge badge-medium">In Progress</span></td>
                                        <td>
                                            <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;">View</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div style="padding: 16px 24px; border-top: 1px solid #e2e8f0; display: flex; justify-content: between; align-items: center;">
                            <div style="font-size: 14px; color: #64748b;">Showing 1-8 of 1,847 customers</div>
                            <div style="display: flex; gap: 8px;">
                                <button class="btn btn-secondary" style="padding: 8px 16px;">Previous</button>
                                <button class="btn btn-secondary" style="padding: 8px 16px;">1</button>
                                <button class="btn btn-primary" style="padding: 8px 16px;">2</button>
                                <button class="btn btn-secondary" style="padding: 8px 16px;">3</button>
                                <button class="btn btn-secondary" style="padding: 8px 16px;">Next</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PAGE 4: MODEL MONITORING -->
                <div id="page-model" class="page">
                    <div class="page-header">
                        <h1 class="page-title">Model Monitoring</h1>
                        <p class="page-subtitle">Performance metrics and data drift analysis</p>
                    </div>

                    <!-- Metric Cards -->
                    <div class="metric-grid">
                        <div class="metric-card">
                            <div class="metric-header">
                                <div>
                                    <div class="metric-label">Model Accuracy</div>
                                    <div class="metric-value-large">89.4%</div>
                                    <div style="display: flex; align-items: center; gap: 6px; margin-top: 8px;">
                                        <span style="color: #10b981; font-size: 13px; font-weight: 600;">↑ 2.1%</span>
                                        <span style="color: #64748b; font-size: 13px;">vs last month</span>
                                    </div>
                                </div>
                                <div class="metric-icon" style="background: #dbeafe; color: #1e40af;">
                                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-header">
                                <div>
                                    <div class="metric-label">AUC-ROC Score</div>
                                    <div class="metric-value-large">0.924</div>
                                    <div style="display: flex; align-items: center; gap: 6px; margin-top: 8px;">
                                        <span style="color: #10b981; font-size: 13px; font-weight: 600;">↑ 0.018</span>
                                        <span style="color: #64748b; font-size: 13px;">Excellent performance</span>
                                    </div>
                                </div>
                                <div class="metric-icon" style="background: #d1fae5; color: #065f46;">
                                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M4 11H2v3h2v-3zm5-4H7v7h2V7zm5-5v12h-2V2h2zm-2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-2zM6 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm-5 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-header">
                                <div>
                                    <div class="metric-label">False Negative Rate</div>
                                    <div class="metric-value-large">4.8%</div>
                                    <div style="display: flex; align-items: center; gap: 6px; margin-top: 8px;">
                                        <span style="color: #10b981; font-size: 13px; font-weight: 600;">↓ 1.2%</span>
                                        <span style="color: #64748b; font-size: 13px;">Within threshold</span>
                                    </div>
                                </div>
                                <div class="metric-icon" style="background: #fef3c7; color: #92400e;">
                                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/>
                                        <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-header">
                                <div>
                                    <div class="metric-label">Last Retrained</div>
                                    <div class="metric-value-large" style="font-size: 24px;">Feb 1</div>
                                    <div style="display: flex; align-items: center; gap: 6px; margin-top: 8px;">
                                        <span style="color: #64748b; font-size: 13px; font-weight: 600;">14 days ago</span>
                                        <span style="color: #64748b; font-size: 13px;">Next: Feb 28</span>
                                    </div>
                                </div>
                                <div class="metric-icon" style="background: #e0e7ff; color: #3730a3;">
                                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Model Performance Chart -->
                    <div class="chart-card" style="margin-bottom: 24px;">
                        <div class="chart-header">
                            <div>
                                <div class="chart-title">Model Performance Over Time</div>
                                <div class="chart-subtitle">Accuracy and precision metrics tracking</div>
                            </div>
                        </div>
                        <canvas id="modelPerfChart"></canvas>
                    </div>

                    <!-- Data Drift Analysis -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <div>
                                <div class="chart-title">Data Drift Monitoring</div>
                                <div class="chart-subtitle">Feature distribution changes and alerts</div>
                            </div>
                        </div>
                        <div style="padding: 24px;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                                <div>
                                    <div style="padding: 16px; background: #fef2f2; border: 1px solid #fecaca; border-radius: 8px; margin-bottom: 16px;">
                                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                                            <span style="font-size: 24px;">⚠️</span>
                                            <div>
                                                <div style="font-size: 14px; font-weight: 600; color: #991b1b;">Moderate Drift Detected</div>
                                                <div style="font-size: 13px; color: #7f1d1d;">Income distribution shift</div>
                                            </div>
                                        </div>
                                        <div style="font-size: 13px; color: #991b1b; margin-top: 8px;">
                                            PSI Score: 0.18 • Threshold: 0.15
                                        </div>
                                    </div>
                                    
                                    <div style="padding: 16px; background: #fffbeb; border: 1px solid #fef3c7; border-radius: 8px;">
                                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                                            <span style="font-size: 24px;">⚡</span>
                                            <div>
                                                <div style="font-size: 14px; font-weight: 600; color: #92400e;">Minor Drift</div>
                                                <div style="font-size: 13px; color: #78350f;">Credit utilization pattern</div>
                                            </div>
                                        </div>
                                        <div style="font-size: 13px; color: #92400e; margin-top: 8px;">
                                            PSI Score: 0.11 • Threshold: 0.15
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <div style="margin-bottom: 20px;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                            <span style="font-size: 14px; font-weight: 600;">Income Feature</span>
                                            <span style="font-size: 14px; font-weight: 700; color: #ef4444;">Drifting</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 72%; background: linear-gradient(90deg, #ef4444 0%, #dc2626 100%);"></div>
                                        </div>
                                    </div>
                                    
                                    <div style="margin-bottom: 20px;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                            <span style="font-size: 14px; font-weight: 600;">Credit Utilization</span>
                                            <span style="font-size: 14px; font-weight: 700; color: #f59e0b;">Monitoring</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 44%; background: linear-gradient(90deg, #f59e0b 0%, #d97706 100%);"></div>
                                        </div>
                                    </div>
                                    
                                    <div style="margin-bottom: 20px;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                            <span style="font-size: 14px; font-weight: 600;">EMI History</span>
                                            <span style="font-size: 14px; font-weight: 700; color: #10b981;">Stable</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 18%; background: linear-gradient(90deg, #10b981 0%, #059669 100%);"></div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                            <span style="font-size: 14px; font-weight: 600;">Account Balance</span>
                                            <span style="font-size: 14px; font-weight: 700; color: #10b981;">Stable</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 12%; background: linear-gradient(90deg, #10b981 0%, #059669 100%);"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid #e2e8f0; display: flex; justify-content: space-between; align-items: center;">
                                <div style="font-size: 13px; color: #64748b;">
                                    Last checked: Feb 15, 2026 08:45 AM • Next check: Feb 16, 2026 08:00 AM
                                </div>
                                <button class="btn btn-primary">Review & Retrain Model</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Show alert details in modal
        function showAlertDetails(alertType) {
            const alerts = {
                critical: {
                    title: 'High Risk Account Review Required',
                    details: `
                        <p style="margin-bottom: 16px;"><strong>What happened:</strong><br>
                        We've identified 23 customer accounts that have moved into the critical risk category over the past 24 hours. Their combined outstanding balance is around ₹45.2 crores.</p>
                        
                        <p style="margin-bottom: 16px;"><strong>Who's affected:</strong><br>
                        • 8 accounts scoring between 85-90 (total exposure: ₹12.4 Cr)<br>
                        • 15 accounts scoring between 80-85 (total exposure: ₹32.8 Cr)</p>
                        
                        <p style="margin-bottom: 16px;"><strong>Most urgent cases:</strong><br>
                        • Customer CUS-18234: Score jumped to 82 (₹28.5L outstanding)<br>
                        • Customer CUS-19475: Now at 85 (₹15.2L outstanding)<br>
                        • Customer CUS-20156: Reached 83 (₹22.8L outstanding)</p>
                        
                        <p style="margin-bottom: 0;"><strong>Next steps:</strong><br>
                        The team should reach out to these customers today. Priority should be the top 3 accounts listed above. Consider offering payment plans or restructuring options where appropriate.</p>
                    `,
                    color: '#dc2626'
                },
                warning: {
                    title: 'Model Performance Check',
                    details: `
                        <p style="margin-bottom: 16px;"><strong>What we noticed:</strong><br>
                        The income distribution feature in our risk model has started drifting. The PSI score hit 0.18 yesterday (our threshold is 0.15), which means customer income patterns have shifted from what the model was trained on.</p>
                        
                        <p style="margin-bottom: 16px;"><strong>Why this matters:</strong><br>
                        This could affect prediction accuracy by 2-3% over the next few weeks. About 156 customers fall into the affected segment. We might start seeing more false negatives if we don't address this soon.</p>
                        
                        <p style="margin-bottom: 16px;"><strong>What's causing it:</strong><br>
                        Likely a combination of economic changes, seasonal employment patterns, and new customer segments we've been serving. Nothing alarming, just natural market evolution.</p>
                        
                        <p style="margin-bottom: 0;"><strong>Recommendation:</strong><br>
                        Let's schedule a model retraining session within the next week. We should update the training dataset with recent data and run validation tests before deploying.</p>
                    `,
                    color: '#f59e0b'
                },
                info: {
                    title: 'Good News on Collections',
                    details: `
                        <p style="margin-bottom: 16px;"><strong>Performance this month:</strong><br>
                        Our collection efficiency is at 96.2%, which beats our 95% target. We collected ₹118 crores against a target of ₹112 crores. That's pretty solid performance.</p>
                        
                        <p style="margin-bottom: 16px;"><strong>What's working:</strong><br>
                        The early intervention approach we implemented last quarter is really paying off. RM engagement is up 24%, and customers are responding better to our automated reminders. The response rate increased by 15% month-over-month.</p>
                        
                        <p style="margin-bottom: 16px;"><strong>Other positives:</strong><br>
                        • Recovery rate improved to 18.9% (up 6.2% from last month)<br>
                        • Our intervention success rate is holding at 76.3%<br>
                        • Overall delinquency rate continues to trend downward</p>
                        
                        <p style="margin-bottom: 0;"><strong>Keep it up:</strong><br>
                        No major changes needed. Let's stick with the current strategy and maybe look at scaling what's working to other regions.</p>
                    `,
                    color: '#3b82f6'
                }
            };
            
            const alert = alerts[alertType];
            const modal = `
                <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 10000; display: flex; align-items: center; justify-content: center; animation: fadeIn 0.2s;" onclick="this.remove()">
                    <div style="background: white; border-radius: 12px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0,0,0,0.25); animation: slideUp 0.3s;" onclick="event.stopPropagation()">
                        <div style="padding: 24px; border-bottom: 1px solid #e5e7eb;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <h2 style="font-size: 18px; font-weight: 600; color: #111827; margin: 0; line-height: 1.4;">${alert.title}</h2>
                                <button onclick="this.closest('[style*=fixed]').remove()" style="background: #f3f4f6; border: none; width: 32px; height: 32px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background 0.2s;" onmouseover="this.style.background='#e5e7eb'" onmouseout="this.style.background='#f3f4f6'">
                                    <svg width="14" height="14" fill="#6b7280" viewBox="0 0 16 16">
                                        <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div style="padding: 24px; line-height: 1.6; color: #374151; font-size: 14px;">
                            ${alert.details}
                        </div>
                        <div style="padding: 16px 24px; border-top: 1px solid #e5e7eb; display: flex; gap: 10px; justify-content: flex-end;">
                            <button onclick="this.closest('[style*=fixed]').remove()" class="btn btn-secondary" style="padding: 9px 18px;">Dismiss</button>
                            <button onclick="alert('Got it! The recommended actions will be queued for the team.'); this.closest('[style*=fixed]').remove();" class="btn btn-primary" style="padding: 9px 18px;">Acknowledge</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modal);
        }

        // Toggle collapsible sections
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            const icon = document.getElementById(sectionId + '-icon');
            
            if (section.style.display === 'none') {
                section.style.display = 'block';
                icon.style.transform = 'rotate(0deg)';
            } else {
                section.style.display = 'none';
                icon.style.transform = 'rotate(-90deg)';
            }
        }

        // Advanced search function
        function performAdvancedSearch() {
            const customerId = document.getElementById('customerId').value.trim();
            const statusDiv = document.getElementById('advancedSearchStatus');
            
            if (!customerId) {
                statusDiv.style.color = '#dc2626';
                statusDiv.textContent = '⚠ Please enter a Customer ID to search';
                return;
            }
            
            // Check if customer exists
            const customerExists = customers[customerId];
            
            if (!customerExists) {
                statusDiv.style.color = '#dc2626';
                statusDiv.innerHTML = `
                    <div style="padding: 20px; background: #fef2f2; border: 1px solid #fecaca; border-radius: 8px; margin-top: 16px;">
                        <div style="font-size: 15px; font-weight: 600; color: #991b1b; margin-bottom: 8px;">❌ No Customer Found</div>
                        <div style="font-size: 13px; color: #7f1d1d;">No customer matches the provided criteria. Try: CUS-15847, CUS-18234, or CUS-12903</div>
                    </div>
                `;
                document.getElementById('customerDetailsSection').style.display = 'none';
                return;
            }
            
            // Show loading
            statusDiv.style.color = '#3b82f6';
            statusDiv.textContent = '🔍 Analyzing customer profile...';
            
            // Simulate analysis delay
            setTimeout(() => {
                displayAdvancedSearchResults(customerId, customerExists);
            }, 1000);
        }

        // Display advanced search results
        function displayAdvancedSearchResults(customerId, customer) {
            const statusDiv = document.getElementById('advancedSearchStatus');
            
            statusDiv.style.color = '#059669';
            statusDiv.innerHTML = `
                <div style="padding: 16px; background: #d1fae5; border: 1px solid #a7f3d0; border-radius: 8px; margin-top: 16px;">
                    <div style="font-size: 15px; font-weight: 600; color: #065f46;">✅ Customer Profile Retrieved Successfully</div>
                    <div style="font-size: 13px; color: #047857; margin-top: 4px;">Analysis complete • Displaying risk assessment below</div>
                </div>
            `;
            
            // Show results section with complete customer view
            const detailsSection = document.getElementById('customerDetailsSection');
            detailsSection.style.display = 'block';
            
            // Complete customer risk intelligence view
            detailsSection.innerHTML = `
                <div style="background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); padding: 20px 24px; border-radius: 12px; margin-bottom: 32px; border-left: 4px solid #3b82f6;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-size: 20px; font-weight: 700; color: #1e40af; margin-bottom: 6px;">
                                Customer Profile: ${customerId}
                            </div>
                            <div style="font-size: 14px; color: #1e3a8a;">
                                <strong>${customer.name}</strong> • ${customer.loanType} • ${customer.branch}
                            </div>
                        </div>
                        <button class="btn btn-secondary" onclick="resetAdvancedSearch()" style="padding: 10px 24px;">
                            New Search
                        </button>
                    </div>
                </div>

                <!-- Section 5: Predictive Risk Assessment -->
                <div class="chart-card" style="margin-bottom: 32px; background: linear-gradient(135deg, #fef3c7 0%, #fefce8 100%); border-left: 4px solid #f59e0b;">
                    <div class="chart-header" style="border-bottom: 1px solid #fde68a; padding-bottom: 16px; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="background: #f59e0b; width: 32px; height: 32px; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 14px;">5</div>
                            <div>
                                <div class="chart-title" style="color: #92400e;">Predictive Risk Assessment & Decision Support</div>
                                <div class="chart-subtitle" style="color: #78350f;">Auto-generated by ML model • Read-only</div>
                            </div>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; padding: 0 24px 24px;">
                        <div style="text-align: center; padding: 20px; background: white; border-radius: 8px; border: 1px solid #fde68a;">
                            <div style="font-size: 36px; font-weight: 800; color: #92400e; margin-bottom: 8px;">${customer.probability}%</div>
                            <div style="font-size: 13px; font-weight: 600; color: #78350f;">Default Probability</div>
                        </div>
                        <div style="text-align: center; padding: 20px; background: white; border-radius: 8px; border: 1px solid #fde68a;">
                            <div style="font-size: 24px; font-weight: 700; margin-bottom: 8px;">
                                <span class="badge ${customer.riskScore >= 80 ? 'badge-critical' : customer.riskScore >= 70 ? 'badge-high' : 'badge-medium'}" style="font-size: 16px; padding: 6px 16px;">${customer.riskLevel}</span>
                            </div>
                            <div style="font-size: 13px; font-weight: 600; color: #78350f;">Risk Category</div>
                        </div>
                        <div style="text-align: center; padding: 20px; background: white; border-radius: 8px; border: 1px solid #fde68a;">
                            <div style="font-size: 36px; font-weight: 800; color: #92400e; margin-bottom: 8px;">${customer.confidence}%</div>
                            <div style="font-size: 13px; font-weight: 600; color: #78350f;">Model Confidence</div>
                        </div>
                        <div style="text-align: center; padding: 20px; background: white; border-radius: 8px; border: 1px solid #fde68a;">
                            <div style="font-size: 15px; font-weight: 700; color: #92400e; margin-bottom: 8px;">Immediate Contact</div>
                            <div style="font-size: 13px; font-weight: 600; color: #78350f;">Recommended Action</div>
                        </div>
                    </div>
                </div>

                <!-- Customer Risk Overview -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 32px;" id="customerRiskCards">
                    <!-- Risk Score Gauge -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <div>
                                <div class="chart-title">Overall Risk Score</div>
                                <div class="chart-subtitle">Calculated using ML prediction model</div>
                            </div>
                        </div>
                        <div class="risk-gauge-container">
                            <div class="risk-gauge">
                                <canvas id="riskGaugeChart"></canvas>
                                <div class="gauge-score">
                                    <div class="gauge-value">${customer.riskScore}</div>
                                    <div class="gauge-label">${customer.riskLevel}</div>
                                </div>
                            </div>
                        </div>
                        <div style="padding: 0 24px 24px; display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div>
                                <div style="font-size: 13px; color: #64748b; margin-bottom: 4px;">Delinquency Probability</div>
                                <div style="font-size: 20px; font-weight: 700; color: #ef4444;">${customer.probability}%</div>
                            </div>
                            <div>
                                <div style="font-size: 13px; color: #64748b; margin-bottom: 4px;">Confidence Score</div>
                                <div style="font-size: 20px; font-weight: 700; color: #0f172a;">${customer.confidence}%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Customer Overview -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <div>
                                <div class="chart-title">Customer Overview</div>
                                <div class="chart-subtitle">Account details and loan information</div>
                            </div>
                        </div>
                        <div style="padding: 20px 0;">
                            <div style="display: grid; gap: 16px; padding: 0 24px;">
                                <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                    <span style="color: #64748b; font-size: 14px;">Customer Name</span>
                                    <span style="font-weight: 600; font-size: 14px;">${customer.name}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                    <span style="color: #64748b; font-size: 14px;">Loan Product Type</span>
                                    <span style="font-weight: 600; font-size: 14px;">${customer.loanType}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                    <span style="color: #64748b; font-size: 14px;">Outstanding Amount</span>
                                    <span style="font-weight: 600; font-size: 14px;">${customer.outstanding}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                    <span style="color: #64748b; font-size: 14px;">Monthly EMI</span>
                                    <span style="font-weight: 600; font-size: 14px;">${customer.emi}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                    <span style="color: #64748b; font-size: 14px;">Account Age</span>
                                    <span style="font-weight: 600; font-size: 14px;">${customer.age}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 12px 0;">
                                    <span style="color: #64748b; font-size: 14px;">Branch</span>
                                    <span style="font-weight: 600; font-size: 14px;">${customer.branch}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Risk Drivers -->
                <div class="chart-card" style="margin-bottom: 24px;">
                    <div class="chart-header">
                        <div>
                            <div class="chart-title">Risk Driver Analysis</div>
                            <div class="chart-subtitle">Factors contributing to elevated risk score</div>
                        </div>
                    </div>
                    <div style="padding: 24px;" id="riskDriversContainer">
                        ${customer.drivers.map(driver => `
                            <div style="margin-bottom: 20px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="font-size: 14px; font-weight: 600;">${driver.name}</span>
                                    <span style="font-size: 14px; font-weight: 700; color: ${driver.color};">${typeof driver.value === 'number' ? (driver.value > 0 ? '+' : '') + driver.value + (Math.abs(driver.value) > 1 ? '%' : '') : driver.value}</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${driver.percent}%; background: linear-gradient(90deg, ${driver.color} 0%, ${driver.color}dd 100%);"></div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <!-- Bottom Row -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                    <!-- Behavioral Timeline -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <div>
                                <div class="chart-title">Behavioral Timeline</div>
                                <div class="chart-subtitle">Recent financial events and patterns</div>
                            </div>
                        </div>
                        <div class="timeline" id="behavioralTimeline">
                            ${customer.timeline.map((event, index) => {
                                const dotColors = {
                                    critical: 'background: #fecaca; color: #991b1b;',
                                    warning: 'background: #fed7aa; color: #92400e;',
                                    info: 'background: #fef3c7; color: #92400e;'
                                };
                                const svgIcons = {
                                    critical: '<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>',
                                    warning: '<path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>',
                                    info: '<path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>'
                                };
                                return `
                                    <div class="timeline-item" data-event-index="${index}">
                                        <div class="timeline-dot" style="${dotColors[event.type]}">
                                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                                ${svgIcons[event.type] || svgIcons.info}
                                            </svg>
                                        </div>
                                        <div class="timeline-content">
                                            <div class="timeline-title">${event.title}</div>
                                            <div class="timeline-desc">${event.desc}</div>
                                            <div class="timeline-date">${event.date}</div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>

                    <!-- Recommended Actions -->
                    <div class="action-panel">
                        <div class="chart-header" style="margin-bottom: 20px;">
                            <div>
                                <div class="chart-title">Recommended Actions</div>
                                <div class="chart-subtitle">Proactive interventions to prevent delinquency</div>
                            </div>
                        </div>
                        <div class="action-item" style="border-color: #ef4444; background: #fef2f2;">
                            <div class="action-title">🔴 Immediate: Send Payment Reminder</div>
                            <div class="action-meta">
                                <span><strong>Urgency:</strong> Critical</span>
                                <span><strong>Impact:</strong> 12-15% recovery</span>
                            </div>
                        </div>
                        <div class="action-item">
                            <div class="action-title">📞 Assign Relationship Manager</div>
                            <div class="action-meta">
                                <span><strong>Urgency:</strong> High</span>
                                <span><strong>Impact:</strong> 18-22% recovery</span>
                            </div>
                        </div>
                        <div class="action-item">
                            <div class="action-title">💳 Offer EMI Restructuring</div>
                            <div class="action-meta">
                                <span><strong>Urgency:</strong> Medium</span>
                                <span><strong>Impact:</strong> 25-30% recovery</span>
                            </div>
                        </div>
                        <div class="action-item">
                            <div class="action-title">⏰ Provide 15-Day Grace Period</div>
                            <div class="action-meta">
                                <span><strong>Urgency:</strong> Medium</span>
                                <span><strong>Impact:</strong> 8-12% recovery</span>
                            </div>
                        </div>
                        <div style="margin-top: 20px; display: flex; gap: 12px;">
                            <button class="btn btn-primary" style="flex: 1;" onclick="alert('Actions queued for execution!')">Execute All Actions</button>
                            <button class="btn btn-secondary" onclick="alert('Customize intervention plan')">Customize Plan</button>
                        </div>
                    </div>
                </div>
            `;
            
            // Re-initialize the risk gauge chart
            setTimeout(() => {
                const gaugeCtx = document.getElementById('riskGaugeChart');
                if (gaugeCtx) {
                    new Chart(gaugeCtx.getContext('2d'), {
                        type: 'doughnut',
                        data: {
                            datasets: [{
                                data: [customer.riskScore, 100 - customer.riskScore],
                                backgroundColor: [
                                    customer.riskScore >= 80 ? '#dc2626' : customer.riskScore >= 70 ? '#ef4444' : '#f59e0b',
                                    'rgba(226, 232, 240, 0.3)'
                                ],
                                borderWidth: 0,
                                circumference: 180,
                                rotation: 270
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: true,
                            cutout: '75%',
                            plugins: {
                                legend: { display: false },
                                tooltip: { enabled: false }
                            }
                        }
                    });
                }
                
                // Add click handlers to timeline items
                document.querySelectorAll('.timeline-item').forEach(item => {
                    item.addEventListener('click', function() {
                        const eventIndex = parseInt(this.getAttribute('data-event-index'));
                        const event = customer.timeline[eventIndex];
                        alert(`${event.title}\n\n${event.desc}\n\nDate: ${event.date}`);
                    });
                });

                // Add click handlers to action items
                document.querySelectorAll('.action-item').forEach(item => {
                    item.addEventListener('click', function() {
                        const title = this.querySelector('.action-title').textContent;
                        if (confirm(`Execute Action: ${title}\n\nAre you sure you want to proceed?`)) {
                            alert('✅ Action initiated! The recommended workflow will be executed.');
                        }
                    });
                });
            }, 100);
            
            // Scroll to results
            setTimeout(() => {
                detailsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 200);
        }

        // Reset advanced search
        function resetAdvancedSearch() {
            // Clear all input fields
            document.getElementById('customerId').value = '';
            document.getElementById('month').selectedIndex = 2;
            document.getElementById('segment').selectedIndex = 1;
            document.getElementById('regionTier').selectedIndex = 1;
            document.getElementById('productType').selectedIndex = 1;
            document.getElementById('activeProducts').value = '';
            document.getElementById('creditUtilization').value = '';
            document.getElementById('totalObligation').value = '';
            document.getElementById('emiAmount').value = '';
            document.getElementById('daysToEmi').value = '';
            document.getElementById('monthlyIncome').value = '';
            document.getElementById('emiIncomeRatio').value = '';
            document.getElementById('balanceChange').value = '';
            document.getElementById('atmWithdrawal').value = '';
            document.getElementById('salaryDelay').value = '';
            document.getElementById('paymentHistory').selectedIndex = 0;
            
            // Clear status and hide results
            document.getElementById('advancedSearchStatus').textContent = '';
            document.getElementById('customerDetailsSection').style.display = 'none';
            
            // Collapse all sections except first
            document.getElementById('section2').style.display = 'none';
            document.getElementById('section2-icon').style.transform = 'rotate(-90deg)';
            document.getElementById('section3').style.display = 'none';
            document.getElementById('section3-icon').style.transform = 'rotate(-90deg)';
            document.getElementById('section4').style.display = 'none';
            document.getElementById('section4-icon').style.transform = 'rotate(-90deg)';
            
            // Scroll to top
            document.getElementById('page-customer').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Navigation
        function showPage(pageName) {
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            const targetPage = document.getElementById('page-' + pageName);
            if (targetPage) {
                targetPage.classList.add('active');
            }
            
            // Update nav items
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
                const itemPage = item.getAttribute('data-page');
                if (itemPage === pageName) {
                    item.classList.add('active');
                }
            });
        }

        // Initialize Charts
        Chart.defaults.font.family = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';
        Chart.defaults.color = '#64748b';

        // Risk Distribution Doughnut Chart
        const riskDistCtx = document.getElementById('riskDistChart').getContext('2d');
        new Chart(riskDistCtx, {
            type: 'doughnut',
            data: {
                labels: ['Low Risk', 'Medium Risk', 'High Risk', 'Critical'],
                datasets: [{
                    data: [15234, 6421, 2105, 822],
                    backgroundColor: [
                        'rgba(16, 185, 129, 0.8)',
                        'rgba(245, 158, 11, 0.8)',
                        'rgba(239, 68, 68, 0.8)',
                        'rgba(220, 38, 38, 0.9)'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            font: { size: 13, weight: 500 }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.9)',
                        padding: 12,
                        cornerRadius: 8,
                        titleFont: { size: 14, weight: 600 },
                        bodyFont: { size: 13 }
                    }
                }
            }
        });

        // Risk Trend Line Chart
        const riskTrendCtx = document.getElementById('riskTrendChart').getContext('2d');
        new Chart(riskTrendCtx, {
            type: 'line',
            data: {
                labels: ['Aug', 'Sep', 'Oct', 'Nov', 'Dec', 'Jan', 'Feb'],
                datasets: [{
                    label: 'Without Intervention',
                    data: [6.2, 6.8, 7.2, 7.5, 7.8, 8.1, 8.4],
                    borderColor: '#ef4444',
                    backgroundColor: 'rgba(239, 68, 68, 0.08)',
                    tension: 0.4,
                    fill: true,
                    borderWidth: 3,
                    pointRadius: 5,
                    pointHoverRadius: 7,
                    pointBackgroundColor: '#ef4444',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointHoverBackgroundColor: '#dc2626',
                    pointHoverBorderColor: '#fff',
                    pointHoverBorderWidth: 3
                }, {
                    label: 'With Intervention (Actual)',
                    data: [6.2, 6.5, 6.3, 6.1, 5.8, 5.2, 4.2],
                    borderColor: '#3b82f6',
                    backgroundColor: 'rgba(59, 130, 246, 0.08)',
                    tension: 0.4,
                    fill: true,
                    borderWidth: 3,
                    pointRadius: 5,
                    pointHoverRadius: 7,
                    pointBackgroundColor: '#3b82f6',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointHoverBackgroundColor: '#2563eb',
                    pointHoverBorderColor: '#fff',
                    pointHoverBorderWidth: 3
                }, {
                    label: 'Target',
                    data: [6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0],
                    borderColor: '#10b981',
                    backgroundColor: 'transparent',
                    borderDash: [8, 4],
                    tension: 0,
                    fill: false,
                    borderWidth: 2,
                    pointRadius: 0,
                    pointHoverRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            font: { size: 13, weight: 500 },
                            usePointStyle: true,
                            pointStyle: 'circle',
                            boxWidth: 8,
                            boxHeight: 8
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.95)',
                        padding: 12,
                        cornerRadius: 8,
                        titleFont: { size: 14, weight: 600 },
                        bodyFont: { size: 13 },
                        bodySpacing: 6,
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += context.parsed.y.toFixed(1) + '%';
                                return label;
                            },
                            afterBody: function(context) {
                                if (context[0].dataIndex === 6) { // Feb (latest)
                                    const withIntervention = context[0].dataset.label.includes('Actual');
                                    const withoutIntervention = context[0].dataset.label.includes('Without');
                                    if (withIntervention) {
                                        return ['\nImprovement: -4.2% vs projected'];
                                    } else if (withoutIntervention) {
                                        return ['\nProjected without action'];
                                    }
                                }
                                return '';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 10,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            },
                            font: {
                                size: 12
                            },
                            color: '#64748b'
                        },
                        grid: {
                            color: 'rgba(226, 232, 240, 0.5)',
                            drawBorder: false
                        },
                        border: {
                            display: false
                        }
                    },
                    x: {
                        grid: {
                            display: false,
                            drawBorder: false
                        },
                        ticks: {
                            font: {
                                size: 12
                            },
                            color: '#64748b'
                        },
                        border: {
                            display: false
                        }
                    }
                }
            }
        });

        // Loan Type Bar Chart
        const loanTypeCtx = document.getElementById('loanTypeChart').getContext('2d');
        new Chart(loanTypeCtx, {
            type: 'bar',
            data: {
                labels: ['Personal Loan', 'Home Loan', 'Auto Loan', 'Business Loan', 'Credit Card'],
                datasets: [{
                    label: 'At-Risk Count',
                    data: [842, 521, 287, 164, 33],
                    backgroundColor: [
                        'rgba(59, 130, 246, 0.8)',
                        'rgba(99, 102, 241, 0.8)',
                        'rgba(139, 92, 246, 0.8)',
                        'rgba(168, 85, 247, 0.8)',
                        'rgba(217, 70, 239, 0.8)'
                    ],
                    borderRadius: 6,
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(226, 232, 240, 0.5)'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });

        // Regional Chart
        const regionalCtx = document.getElementById('regionalChart').getContext('2d');
        new Chart(regionalCtx, {
            type: 'bar',
            data: {
                labels: ['Mumbai', 'Delhi', 'Bangalore', 'Pune', 'Hyderabad', 'Chennai'],
                datasets: [{
                    label: 'Risk Score',
                    data: [72, 68, 65, 59, 54, 51],
                    backgroundColor: [
                        'rgba(239, 68, 68, 0.8)',
                        'rgba(249, 115, 22, 0.8)',
                        'rgba(245, 158, 11, 0.8)',
                        'rgba(234, 179, 8, 0.8)',
                        'rgba(132, 204, 22, 0.8)',
                        'rgba(34, 197, 94, 0.8)'
                    ],
                    borderRadius: 6,
                    borderWidth: 0
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        max: 100,
                        grid: {
                            color: 'rgba(226, 232, 240, 0.5)'
                        }
                    },
                    y: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });

        // Risk Gauge (Customer Page)
        const gaugeCtx = document.getElementById('riskGaugeChart').getContext('2d');
        new Chart(gaugeCtx, {
            type: 'doughnut',
            data: {
                datasets: [{
                    data: [73, 27],
                    backgroundColor: [
                        'rgba(239, 68, 68, 0.8)',
                        'rgba(226, 232, 240, 0.3)'
                    ],
                    borderWidth: 0,
                    circumference: 180,
                    rotation: 270
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                cutout: '75%',
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        enabled: false
                    }
                }
            }
        });

        // Model Performance Chart
        const modelPerfCtx = document.getElementById('modelPerfChart').getContext('2d');
        new Chart(modelPerfCtx, {
            type: 'line',
            data: {
                labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6'],
                datasets: [{
                    label: 'Accuracy',
                    data: [87.2, 87.8, 88.1, 88.5, 89.0, 89.4],
                    borderColor: 'rgba(59, 130, 246, 0.8)',
                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                    tension: 0.4,
                    fill: true,
                    borderWidth: 3
                }, {
                    label: 'Precision',
                    data: [85.5, 86.1, 86.8, 87.2, 87.9, 88.3],
                    borderColor: 'rgba(16, 185, 129, 0.8)',
                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                    tension: 0.4,
                    fill: true,
                    borderWidth: 3
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            font: { size: 13, weight: 500 }
                        }
                    }
                },
                scales: {
                    y: {
                        min: 80,
                        max: 95,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        },
                        grid: {
                            color: 'rgba(226, 232, 240, 0.5)'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });

        // Portfolio Type Chart
        const portfolioTypeCtx = document.getElementById('portfolioTypeChart');
        if (portfolioTypeCtx) {
            new Chart(portfolioTypeCtx.getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: ['Personal Loan', 'Home Loan', 'Auto Loan', 'Business Loan', 'Education Loan'],
                    datasets: [{
                        data: [285.4, 398.7, 95.6, 52.3, 13.2],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(16, 185, 129, 0.8)',
                            'rgba(139, 92, 246, 0.8)',
                            'rgba(245, 158, 11, 0.8)',
                            'rgba(236, 72, 153, 0.8)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: { size: 13, weight: 500 }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(15, 23, 42, 0.9)',
                            padding: 12,
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ₹' + context.parsed + ' Cr';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Tenure Chart
        const tenureCtx = document.getElementById('tenureChart');
        if (tenureCtx) {
            new Chart(tenureCtx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['0-1 Year', '1-3 Years', '3-5 Years', '5-10 Years', '10+ Years'],
                    datasets: [{
                        label: 'Number of Loans',
                        data: [3245, 8967, 6821, 4234, 1315],
                        backgroundColor: 'rgba(59, 130, 246, 0.8)',
                        borderRadius: 8,
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(226, 232, 240, 0.5)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // Portfolio Growth Chart
        const portfolioGrowthCtx = document.getElementById('portfolioGrowthChart');
        if (portfolioGrowthCtx) {
            new Chart(portfolioGrowthCtx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: ['Sep', 'Oct', 'Nov', 'Dec', 'Jan', 'Feb'],
                    datasets: [{
                        label: 'Portfolio Value (₹Cr)',
                        data: [724, 752, 781, 802, 825, 845],
                        borderColor: 'rgba(59, 130, 246, 0.8)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4,
                        fill: true,
                        borderWidth: 3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            ticks: {
                                callback: function(value) {
                                    return '₹' + value + ' Cr';
                                }
                            },
                            grid: {
                                color: 'rgba(226, 232, 240, 0.5)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // Disbursement vs Collection Chart
        const disbursementCtx = document.getElementById('disbursementChart');
        if (disbursementCtx) {
            new Chart(disbursementCtx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['Sep', 'Oct', 'Nov', 'Dec', 'Jan', 'Feb'],
                    datasets: [{
                        label: 'Disbursements',
                        data: [95, 108, 112, 98, 115, 122],
                        backgroundColor: 'rgba(59, 130, 246, 0.8)',
                        borderRadius: 8,
                        borderWidth: 0
                    }, {
                        label: 'Collections',
                        data: [88, 102, 107, 94, 110, 118],
                        backgroundColor: 'rgba(16, 185, 129, 0.8)',
                        borderRadius: 8,
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                font: { size: 13, weight: 500 }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '₹' + value + ' Cr';
                                }
                            },
                            grid: {
                                color: 'rgba(226, 232, 240, 0.5)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // Customer Data
        const customers = {
            'CUS-15847': {
                name: 'Rajesh Kumar Sharma',
                loanType: 'Personal Loan',
                outstanding: '₹4,85,000',
                emi: '₹18,500',
                age: '28 months',
                branch: 'Mumbai Central',
                riskScore: 73,
                probability: 68.5,
                confidence: 91.2,
                riskLevel: 'High Risk',
                drivers: [
                    { name: 'Income Drop (Last 3 months)', value: -35, percent: 85, color: '#ef4444' },
                    { name: 'High Credit Utilization', value: 92, percent: 92, color: '#f97316' },
                    { name: 'Spending Spike (Discretionary)', value: 48, percent: 70, color: '#f59e0b' },
                    { name: 'EMI Bounce History', value: '2 in 6 months', percent: 65, color: '#f59e0b' },
                    { name: 'Account Balance Dip', value: -42, percent: 55, color: '#eab308' }
                ],
                timeline: [
                    { title: 'EMI Payment Missed', desc: 'February EMI bounced due to insufficient funds', date: 'Feb 05, 2026', type: 'critical' },
                    { title: 'Salary Deposit Delayed', desc: 'Monthly salary credited 15 days late', date: 'Jan 20, 2026', type: 'warning' },
                    { title: 'High Expenditure Detected', desc: 'Unusual spending of ₹45,000 on discretionary items', date: 'Jan 12, 2026', type: 'info' },
                    { title: 'Account Balance Low', desc: 'Balance remained below ₹5,000 for 10+ consecutive days', date: 'Dec 28, 2025', type: 'warning' }
                ]
            },
            'CUS-18234': {
                name: 'Priya Desai',
                loanType: 'Home Loan',
                outstanding: '₹28,50,000',
                emi: '₹45,200',
                age: '42 months',
                branch: 'Bangalore Tech Park',
                riskScore: 82,
                probability: 79.2,
                confidence: 94.5,
                riskLevel: 'Critical',
                drivers: [
                    { name: 'Multiple EMI Bounces', value: '3 in 4 months', percent: 92, color: '#dc2626' },
                    { name: 'Job Loss Indicator', value: -100, percent: 95, color: '#ef4444' },
                    { name: 'Credit Card Maxed Out', value: 98, percent: 88, color: '#f97316' },
                    { name: 'No Salary Deposits (60 days)', value: 0, percent: 78, color: '#f59e0b' },
                    { name: 'Collection Calls Missed', value: '5 attempts', percent: 68, color: '#eab308' }
                ],
                timeline: [
                    { title: 'Third EMI Bounce', desc: 'Payment failed - account appears closed', date: 'Feb 10, 2026', type: 'critical' },
                    { title: 'Employment Change Detected', desc: 'No salary credit received for 60+ days', date: 'Jan 15, 2026', type: 'critical' },
                    { title: 'Credit Card Declined', desc: 'Multiple transaction failures reported', date: 'Jan 08, 2026', type: 'warning' },
                    { title: 'Contact Attempt Failed', desc: 'Phone disconnected, emails bouncing', date: 'Dec 20, 2025', type: 'warning' }
                ]
            },
            'CUS-12903': {
                name: 'Amit Patel',
                loanType: 'Auto Loan',
                outstanding: '₹3,25,000',
                emi: '₹12,800',
                age: '18 months',
                branch: 'Delhi NCR',
                riskScore: 71,
                probability: 65.8,
                confidence: 88.3,
                riskLevel: 'High Risk',
                drivers: [
                    { name: 'Late Payments Pattern', value: '4 in 6 months', percent: 75, color: '#ef4444' },
                    { name: 'Income Volatility', value: 45, percent: 68, color: '#f97316' },
                    { name: 'High Debt-to-Income Ratio', value: 78, percent: 72, color: '#f59e0b' },
                    { name: 'Savings Depleted', value: -85, percent: 58, color: '#f59e0b' },
                    { name: 'Multiple Loan Inquiries', value: 6, percent: 48, color: '#eab308' }
                ],
                timeline: [
                    { title: 'Payment Delayed 10 Days', desc: 'EMI paid after reminder call from RM', date: 'Feb 08, 2026', type: 'warning' },
                    { title: 'Irregular Income Pattern', desc: 'Freelance deposits varying 40-60% monthly', date: 'Jan 25, 2026', type: 'info' },
                    { title: 'New Credit Inquiry', desc: 'Applied for credit card with another bank', date: 'Jan 15, 2026', type: 'info' },
                    { title: 'Savings Account Closed', desc: 'Moved to single checking account', date: 'Dec 30, 2025', type: 'warning' }
                ]
            }
        };

        let currentCustomerId = 'CUS-15847';

        // Customer search function
        function searchCustomer() {
            const customerId = document.getElementById('customerIdInput').value.trim();
            const customerName = document.getElementById('customerNameInput').value.trim();
            const customerPhone = document.getElementById('customerPhoneInput').value.trim();
            
            const searchStatus = document.getElementById('searchStatus');
            
            if (!customerId) {
                searchStatus.style.color = '#dc2626';
                searchStatus.textContent = '⚠ Please enter a Customer ID';
                return;
            }
            
            // Check if customer exists in our database
            const customerExists = customers[customerId];
            
            if (!customerExists) {
                searchStatus.style.color = '#dc2626';
                searchStatus.textContent = '❌ Customer not found. Try: CUS-15847, CUS-18234, or CUS-12903';
                return;
            }
            
            // Show loading state
            searchStatus.style.color = '#3b82f6';
            searchStatus.textContent = '🔍 Searching...';
            
            // Simulate API call delay
            setTimeout(() => {
                displayCustomerResults(customerId, customerExists);
            }, 800);
        }
        
        // Quick load customer function
        function quickLoadCustomer(customerId) {
            document.getElementById('customerIdInput').value = customerId;
            const customer = customers[customerId];
            if (customer) {
                document.getElementById('customerNameInput').value = customer.name.split(' ')[0] + ' ' + customer.name.split(' ')[1];
            }
            searchCustomer();
        }
        
        // Display customer results
        function displayCustomerResults(customerId, customerExists) {
            const searchStatus = document.getElementById('searchStatus');
            
            searchStatus.style.color = '#059669';
            searchStatus.textContent = '✅ Customer found!';
            
            // Update display
            document.getElementById('displayCustomerId').textContent = customerId;
            document.getElementById('displayCustomerName').textContent = customerExists.name;
            
            // Show customer details section
            document.getElementById('customerDetailsSection').style.display = 'block';
            
            // Load customer data
            loadCustomerData(customerId);
            
            // Scroll to results
            setTimeout(() => {
                document.getElementById('customerDetailsSection').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }, 100);
            
            // Clear status after 3 seconds
            setTimeout(() => {
                searchStatus.textContent = '';
            }, 3000);
        }
        
        // Clear search function
        function clearCustomerSearch() {
            document.getElementById('customerIdInput').value = '';
            document.getElementById('customerNameInput').value = '';
            document.getElementById('customerPhoneInput').value = '';
            document.getElementById('searchStatus').textContent = '';
            document.getElementById('customerDetailsSection').style.display = 'none';
            
            // Scroll back to top of customer page
            document.getElementById('page-customer').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }
        
        // Allow Enter key to search
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = ['customerIdInput', 'customerNameInput', 'customerPhoneInput'];
            inputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                if (input) {
                    input.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            searchCustomer();
                        }
                    });
                }
            });
        });

        // Load customer data
        function loadCustomerData(customerId) {
            currentCustomerId = customerId;
            const customer = customers[customerId];
            if (!customer) return;

            // Animate transition
            const customerPage = document.getElementById('page-customer');
            customerPage.style.opacity = '0';
            
            setTimeout(() => {
                // Update header
                document.querySelector('#page-customer .page-subtitle').textContent = 
                    `Detailed risk analysis for customer ID: ${customerId}`;

                // Update overview section
                const overviewSection = document.querySelector('#page-customer .chart-card:nth-child(2)');
                overviewSection.innerHTML = `
                    <div class="chart-header">
                        <div>
                            <div class="chart-title">Customer Overview</div>
                            <div class="chart-subtitle">Account details and loan information</div>
                        </div>
                    </div>
                    <div style="padding: 20px 0;">
                        <div style="display: grid; gap: 16px; padding: 0 24px;">
                            <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                <span style="color: #64748b; font-size: 14px;">Customer Name</span>
                                <span style="font-weight: 600; font-size: 14px;">${customer.name}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                <span style="color: #64748b; font-size: 14px;">Loan Product Type</span>
                                <span style="font-weight: 600; font-size: 14px;">${customer.loanType}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                <span style="color: #64748b; font-size: 14px;">Outstanding Amount</span>
                                <span style="font-weight: 600; font-size: 14px;">${customer.outstanding}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                <span style="color: #64748b; font-size: 14px;">Monthly EMI</span>
                                <span style="font-weight: 600; font-size: 14px;">${customer.emi}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f1f5f9;">
                                <span style="color: #64748b; font-size: 14px;">Account Age</span>
                                <span style="font-weight: 600; font-size: 14px;">${customer.age}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 12px 0;">
                                <span style="color: #64748b; font-size: 14px;">Branch</span>
                                <span style="font-weight: 600; font-size: 14px;">${customer.branch}</span>
                            </div>
                        </div>
                    </div>
                `;

                // Update risk score
                document.querySelector('.gauge-value').textContent = customer.riskScore;
                document.querySelector('.gauge-label').textContent = customer.riskLevel;
                document.querySelector('#page-customer .chart-card:nth-child(1) > div:last-child > div:first-child > div:last-child').textContent = customer.probability + '%';
                document.querySelector('#page-customer .chart-card:nth-child(1) > div:last-child > div:last-child > div:last-child').textContent = customer.confidence + '%';

                // Update gauge color based on risk
                const gaugeColor = customer.riskScore >= 80 ? '#dc2626' : customer.riskScore >= 70 ? '#ef4444' : '#f97316';
                document.querySelector('.gauge-value').style.color = gaugeColor;

                // Update risk drivers
                const driversContainer = document.querySelector('#page-customer .chart-card:nth-child(3) > div:last-child');
                driversContainer.innerHTML = customer.drivers.map(driver => `
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="font-size: 14px; font-weight: 600;">${driver.name}</span>
                            <span style="font-size: 14px; font-weight: 700; color: ${driver.color};">${typeof driver.value === 'number' ? (driver.value > 0 ? '+' : '') + driver.value + (driver.value > 1 ? '%' : '') : driver.value}</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${driver.percent}%; background: linear-gradient(90deg, ${driver.color} 0%, ${driver.color}dd 100%);"></div>
                        </div>
                    </div>
                `).join('');

                // Update timeline
                const timelineContainer = document.querySelector('#page-customer .timeline');
                if (timelineContainer) {
                    timelineContainer.innerHTML = customer.timeline.map((event, index) => {
                        const dotColors = {
                            critical: 'background: #fecaca; color: #991b1b;',
                            warning: 'background: #fed7aa; color: #92400e;',
                            info: 'background: #fef3c7; color: #92400e;'
                        };
                        return `
                            <div class="timeline-item" data-event-index="${index}">
                                <div class="timeline-dot" style="${dotColors[event.type]}">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                        ${event.type === 'critical' ? '<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>' : '<path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>'}
                                    </svg>
                                </div>
                                <div class="timeline-content">
                                    <div class="timeline-title">${event.title}</div>
                                    <div class="timeline-desc">${event.desc}</div>
                                    <div class="timeline-date">${event.date}</div>
                                </div>
                            </div>
                        `;
                    }).join('');
                    
                    // Add click handlers to timeline items
                    timelineContainer.querySelectorAll('.timeline-item').forEach(item => {
                        item.addEventListener('click', function() {
                            const eventIndex = parseInt(this.getAttribute('data-event-index'));
                            const event = customer.timeline[eventIndex];
                            showEventDetail(event.title, event.desc);
                        });
                    });
                }

                customerPage.style.opacity = '1';
            }, 200);
        }

        // Show event detail
        function showEventDetail(title, desc) {
            alert(`${title}\n\n${desc}\n\nClick on recommended actions to take preventive measures.`);
        }

        // Add customer selector
        function addCustomerSelector() {
            const pageHeader = document.querySelector('#page-customer .page-header');
            if (!pageHeader || pageHeader.querySelector('.customer-selector')) return;
            
            const selector = document.createElement('div');
            selector.className = 'customer-selector';
            selector.style.cssText = 'margin-top: 16px; display: flex; gap: 12px; flex-wrap: wrap;';
            
            const buttons = Object.keys(customers).map(id => {
                const isActive = id === currentCustomerId;
                return `
                    <button class="btn ${isActive ? 'btn-primary' : 'btn-secondary'}" 
                            data-customer-id="${id}"
                            style="padding: 8px 16px; font-size: 13px;">
                        ${id} - ${customers[id].name.split(' ')[0]}
                    </button>
                `;
            }).join('');
            
            selector.innerHTML = buttons;
            pageHeader.appendChild(selector);
            
            // Add click handlers to buttons
            selector.querySelectorAll('button').forEach(btn => {
                btn.addEventListener('click', function() {
                    const customerId = this.getAttribute('data-customer-id');
                    loadCustomerData(customerId);
                    
                    // Update button states
                    selector.querySelectorAll('button').forEach(b => {
                        b.classList.remove('btn-primary');
                        b.classList.add('btn-secondary');
                    });
                    this.classList.remove('btn-secondary');
                    this.classList.add('btn-primary');
                });
            });
        }

        // Action button handlers
        function executeAction(action) {
            const messages = {
                'reminder': 'Payment reminder sent successfully via SMS and Email!',
                'rm': 'Relationship Manager assigned. They will contact customer within 24 hours.',
                'restructure': 'Loan restructuring proposal prepared. Awaiting customer approval.',
                'grace': '15-day grace period activated. Penalty fees waived.'
            };
            
            const actionName = action.toLowerCase().includes('reminder') ? 'reminder' :
                             action.toLowerCase().includes('manager') ? 'rm' :
                             action.toLowerCase().includes('restructur') ? 'restructure' : 'grace';
            
            if (confirm(`Execute Action: ${action}\n\nAre you sure you want to proceed?`)) {
                alert(`✅ ${messages[actionName]}\n\nStatus: In Progress\nExpected Follow-up: 2-3 business days`);
            }
        }

        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial page to dashboard
            showPage('dashboard');
            
            // Hide customer details section initially
            const detailsSection = document.getElementById('customerDetailsSection');
            if (detailsSection) {
                detailsSection.style.display = 'none';
            }
            
            // Add customer selector after a brief delay
            setTimeout(() => {
                // Don't add customer selector on initial load anymore
                // It will be shown after search
                
                // Make action items clickable
                const actionItems = document.querySelectorAll('.action-item');
                actionItems.forEach(item => {
                    item.addEventListener('click', function() {
                        const title = this.querySelector('.action-title').textContent;
                        executeAction(title);
                    });
                });
            }, 100);
        });

        /* Add page transition effect */
        const style = document.createElement('style');
        style.textContent = `
            .page {
                opacity: 0;
                transition: opacity 0.3s ease;
            }
            .page.active {
                opacity: 1;
            }
            .action-item {
                position: relative;
                overflow: hidden;
            }
            .action-item::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
                transition: left 0.5s;
            }
            .action-item:hover::before {
                left: 100%;
            }
            .timeline-item {
                cursor: pointer;
                transition: all 0.2s;
            }
            .timeline-item:hover {
                transform: translateX(4px);
            }
            .timeline-item:hover .timeline-dot {
                transform: scale(1.1);
            }
            @keyframes pulse {
                0%, 100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0.8;
                }
            }
            .kpi-card.loading {
                animation: pulse 1.5s ease-in-out infinite;
            }
            @keyframes slideIn {
                from {
                    opacity: 0;
                    transform: translateX(-20px);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }
            .kpi-card {
                animation: slideIn 0.4s ease-out forwards;
            }
            .kpi-card:nth-child(1) { animation-delay: 0s; }
            .kpi-card:nth-child(2) { animation-delay: 0.1s; }
            .kpi-card:nth-child(3) { animation-delay: 0.2s; }
            .kpi-card:nth-child(4) { animation-delay: 0.3s; }
            .kpi-card:nth-child(5) { animation-delay: 0.4s; }
            .kpi-card:nth-child(6) { animation-delay: 0.5s; }
        `;
        document.head.appendChild(style);

        // Add click interaction to KPI cards
        document.addEventListener('DOMContentLoaded', function() {
            const kpiCards = document.querySelectorAll('.kpi-card');
            kpiCards.forEach(card => {
                card.addEventListener('click', function() {
                    // Add ripple effect
                    const ripple = document.createElement('div');
                    ripple.style.cssText = `
                        position: absolute;
                        border-radius: 50%;
                        background: rgba(59, 130, 246, 0.3);
                        width: 100px;
                        height: 100px;
                        margin-top: -50px;
                        margin-left: -50px;
                        animation: ripple 0.6s;
                        pointer-events: none;
                    `;
                    
                    const rippleStyle = document.createElement('style');
                    rippleStyle.textContent = `
                        @keyframes ripple {
                            from {
                                transform: scale(0);
                                opacity: 1;
                            }
                            to {
                                transform: scale(4);
                                opacity: 0;
                            }
                        }
                    `;
                    document.head.appendChild(rippleStyle);
                    
                    const rect = this.getBoundingClientRect();
                    const x = event.clientX - rect.left;
                    const y = event.clientY - rect.top;
                    
                    ripple.style.left = x + 'px';
                    ripple.style.top = y + 'px';
                    this.appendChild(ripple);
                    
                    setTimeout(() => ripple.remove(), 600);
                    
                    // Show detail modal (simplified version)
                    const label = this.querySelector('.kpi-label').textContent.trim();
                    const value = this.querySelector('.kpi-value').textContent.trim();
                    console.log(`Clicked: ${label} - ${value}`);
                });
            });
        });
    </script>
</body>
</html>